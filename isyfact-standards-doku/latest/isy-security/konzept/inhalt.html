<!DOCTYPE html>
<html lang="de"> <!-- Sets the language to German for correct hyphenation. -->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Konzept Security (Sicherheit): Inhalt :: IsyFact Dokumentation</title>
    <link rel="canonical" href="https://isyfact.github.io/isyfact-standards-doku/latest/isy-security/konzept/inhalt.html">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../../_/css/isyfact.css">
    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://isyfact.github.io">IsyFact Dokumentation</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="isyfact-standards-doku" data-version="3.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../einstieg/einstieg.html">IsyFact Standards</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../einstieg/einstieg.html">Einstieg</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../einstieg/vorstellung.html">Vorstellung der IsyFact</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../einstieg/vorstellung/isyfact-standards.html">IsyFact-Standards</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../einstieg/vorstellung/isyfact-erweiterungen.html">IsyFact-Erweiterungen</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../einstieg/vorstellung/rahmenbedingungen.html">Rahmenbedingungen</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../einstieg/erste-schritte.html">Erste Schritte</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../einstieg/produkte.html">Eingesetzte Produkte</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../einstieg/produktkatalog/produktvorgabenAllgemein.html">Allgemeine Produktvorgaben</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../einstieg/produktkatalog/technologiestackJavaSpring.html">Java/Spring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../einstieg/produktkatalog/technologiestackTypescriptAngular.html">Typescript/Angular</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../einstieg/produktkatalog/negativliste.html">Negativliste</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../einstieg/produktkatalog/lebenszyklus.html">Lebenszyklus</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../einstieg/produktkatalog/changelog.html">Changelog</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../einstieg/tutorial/master.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../einstieg/whitepaper.html">Whitepaper</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../blaupausen/blaupausen.html">Blaupausen</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../blaupausen/referenzarchitektur/master.html">Referenzarchitektur</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../blaupausen/referenzarchitektur-it-system/master.html">Referenzarchitektur IT-System</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-anwendungskern/master.html">Anwendungskern</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-datenzugriff/einordnung-ziele.html">Datenzugriff</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-datenzugriff/persistenzlogik.html">Konzeption der Persistenzlogik</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-datenzugriff/historisierung.html">Historisierung</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-datenzugriff/versionierung.html">Versionierung von Datenbankschemas</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-service/master.html">Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-web-gui/master.html">Web GUI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-batch/master.html">Batch</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Vorgaben</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../blaupausen/vorgaben-architektur/summaryArchitectureRules.html">Architektur</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../blaupausen/vorgaben-it-sicherheit/summarySecurityRules.html">IT-Sicherheit</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../bausteine/bausteine.html">Bausteine</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Datum &amp; Zeit</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-datetime/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-datetime/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Fehlerbehandlung</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-exception-core/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-exception-core/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">HttpInvoker</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-serviceapi-core/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-serviceapi-core/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">JPA/Hibernate</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../isy-persistence/konzept.html">Konzept</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../isy-persistence/konzept/vorgaben-konventionen.html">Vorgaben und Konventionen</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../isy-persistence/konzept/historisierung.html">Historisierung</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../isy-persistence/konzept/versionierung-mit-liquibase.html">Versionierung (Liquibase)</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../isy-persistence/konzept/versionierung.html">Versionierung (Eigenentwicklung)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Nutzungsvorgaben</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../isy-persistence/nutzungsvorgaben/umsetzung-datenzugriff.html">Umsetzung des Datenzugriffs</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../isy-persistence/nutzungsvorgaben/konfiguration.html">Konfiguration des O/R-Mappings</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../isy-persistence/nutzungsvorgaben/historisierung.html">Historisierung</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../isy-persistence/nutzungsvorgaben/versionierung.html">Versionierung (Eigenentwicklung)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Konfiguration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-konfiguration/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-konfiguration/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Logging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-logging/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-logging/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Polling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-polling/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-polling/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">REST</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-service-rest/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-service-rest/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Sicherheit</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-sicherheit/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-sicherheit/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Sonderzeichen</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-sonderzeichen/konzept/sonderzeichen.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-sonderzeichen/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Task Scheduling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../isy-task/konzept.html">Konzept</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../isy-task/konzept/erweiterung-spring.html">Task Scheduling mit Spring</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../isy-task/konzept/integration-isyfact.html">Integration der IsyFact in das Task Scheduling</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-task/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Überwachung</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-ueberwachung/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-ueberwachung/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Util</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-util/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Bedienkonzept</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-bedienkonzept/bedienkonzept.html">Bedienkonzept</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">JSF</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../isyfact-jsf-doku/latest/isy-web/konzept/konzept.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../isyfact-jsf-doku/latest/isy-web/nutzungsvorgaben/nutzungsvorgaben.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../plattform/plattform.html">Plattform</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../methodik/methodik.html">Methodik</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../methodik/namenskonventionen/master.html">Namenskonventionen</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../methodik/versionierung/master.html">Versionierung</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../methodik/java-programmierkonventionen/master.html">Java Programmierkonventionen</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../methodik/typescript-programmierkonventionen/master.html">TypeScript Programmierkonventionen</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../methodik/vorgaben-dokumentation.html">Vorgaben Dokumentation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../methodik/diagrammerstellung.html">Diagrammerstellung und Modellierung</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../methodik/diagrammerstellung/diagramsnet.html">diagrams.net</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../methodik/diagrammerstellung/enterprise-architect.html">Enterprise Architect</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../methodik/vorgaben-dokumentation/dokumentationstypen.html">Dokumentationstypen der IsyFact</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../methodik/vorlagen.html">Vorlagen</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Spezifikation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../methodik/vorlage-systemspezifikation/master.html">Systemspezifikation</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../methodik/vorlage-schnittstellendokumentation/master.html">Schnittstellen­dokumentation</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../methodik/anleitung-datenflussdiagramme/master.html">Anleitung für Datenflussdiagramme</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../methodik/vorlage-systementwurf/antora-master.html">Systementwurf</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../methodik/vorlage-systemhandbuch/antora-master.html">Systemhandbuch</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../methodik/vorlagen/bearbeitung.html">Bearbeitung der AsciiDoc-Vorlagen</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../werkzeuge/werkzeuge.html">Werkzeuge</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../werkzeuge/dokumentation/einleitung/einfuehrung.html">Dokumentation gemäß IsyFact</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Antora (empfohlen)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../werkzeuge/dokumentation/erstellung/erstellung-antora.html">Seiten anlegen</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../werkzeuge/seitenvorlage.html">Seitenvorlage</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../werkzeuge/kopiervorlage.html">Kopiervorlage für neue Seiten</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../werkzeuge/dokumentation/bearbeitung/bearbeitung-antora.html">Seiten bearbeiten</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../werkzeuge/dokumentation/generierung/generierung-antora.html">Projektseite erzeugen</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">AsciidoctorJ</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../werkzeuge/dokumentation/erstellung/erstellung-asciidoctorj.html">Neue Dokumente anlegen</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../werkzeuge/dokumentation/bearbeitung/bearbeitung-asciidoctorj.html">Dokumente bearbeiten</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../werkzeuge/dokumentation/generierung/generierung-asciidoctorj.html">PDF- und HTML-Dokumente erzeugen</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../werkzeuge/dokumentation/changelog/changelog-doku.html">Zentralisiertes und automatisiertes Changelog</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../werkzeuge/entwicklungsumgebung/master.html">Entwicklungsumgebung</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../werkzeuge/versionierungskontrolle/master.html">Versionierungskontrolle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../werkzeuge/gui-tests/gui-tests-mit-selenium.html">GUI-Tests mit Selenium</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../changelog/aenderungen.html">Änderungen Version 3.0</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../changelog/releasenotes.html">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../changelog/changelog.html">Changelog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../changelog/migrationsleitfaden.html">Migrationsleitfaden IsyFact 3.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../einstieg/migrationsleitfaden-if2/master.html">Migrationsleitfaden IsyFact 2</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">IsyFact Standards</span>
    <span class="version">3.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../glossary/latest/glossary/master.html">Glossar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../glossary/latest/glossary/master.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../einstieg/einstieg.html">IsyFact Standards</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../einstieg/einstieg.html">3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../isyfact-jsf-doku/latest/isy-web/konzept/konzept.html">JavaServer Faces (JSF)</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../isyfact-jsf-doku/latest/isy-web/konzept/konzept.html">6.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../einstieg/einstieg.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../einstieg/einstieg.html">IsyFact Standards</a></li>
    <li><a href="inhalt.html">Konzept Security (Sicherheit): Inhalt</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/IsyFact/isyfact-standards/edit/master/isyfact-standards-doc/src/docs/antora/modules/isy-security/pages/konzept/inhalt.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Inhalt" data-levels="3">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Konzept Security (Sicherheit): Inhalt</h1>
<div class="sect1">
<h2 id="prinzipien-der-sicherheitsarchitektur"><a class="anchor" href="#prinzipien-der-sicherheitsarchitektur"></a>1. Prinzipien der Sicherheitsarchitektur</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Die IsyFact-Referenzarchitektur beinhaltet auf der technischen Ebene Vorgaben für die Sicherheitsarchitektur und für die Prinzipien, nach denen sie aufgebaut ist.
Eine davon ist die Forderung, dass IsyFact-konforme IT-Systeme gegen unberechtigte Nutzung zu schützen sind.
Konkret wird das im Baustein <code>Security</code> durch ein Rollen-, Rechte- und Berechtigungsmanagement realisiert:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Authentifizierungsinformationen, wie Benutzername und Passwort, werden nicht über IT-Systeme hinweg weitergegeben.
Nur der Eigentümer der Authentifizierungsinformationen und der IAM-Service besitzen Kenntnis über diese Informationen.</p>
</li>
<li>
<p>Eine Zweifaktor-Authentifizierung ist durch das Behördenkennzeichen (BHKNZ) als zusätzliches Authentifizierungsmerkmal konzipiert, allerdings setzt dies im IAM-Service voraus, dass dieses Merkmal dort auch ausgewertet werden kann.</p>
</li>
<li>
<p>Die Authentifizierung und grobgranulare Autorisierung (mittels dem Nutzer zugeordneten Rollen) erfolgt an den Außenschnittstellen der Systemlandschaft (Portal, Authentication-Gateway bzw. Service-Gateway).</p>
</li>
<li>
<p>Liegt kein Aufruf über eine Außenschnittstelle vor (z.B. bei einem Batch- oder Task-Aufruf), so geschieht die Authentifizierung und grobgranulare Autorisierung innerhalb der Nutzungsschicht (Batch / Task) des aufrufenden IT-Systems über den IsyFact-Baustein Security.</p>
</li>
<li>
<p>Die feingranulare Autorisierung geschieht in der Nutzungsschicht und im Anwendungskern des aufgerufenen IT-Systems über den IsyFact-Baustein Security, indem die Nutzerrollen auf anwendungsspezifische Rechte abgebildet werden und diese Rechte bei jedem Serviceaufruf geprüft werden.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Existiert keine Systemlandschaft (d.h. IT-Systeme stehen für sich allein), gilt grundsätzlich, dass die Authentifizierung und grobgranulare Autorisierung in der Nutzungsschicht (GUI, Service oder Batch) des IT-Systems geschehen muss.</p>
</div>
<div class="paragraph">
<p>Darüber hinaus finden Authentifizierung und Autorisierung nach den Vorgaben des Berechtigungskonzepts statt.</p>
</div>
<div class="paragraph">
<p>Dieses Dokument beschreibt wesentliche Aspekte der Sicherheitsarchitektur für eine konkrete Anwendungslandschaft.
Da das Berechtigungskonzept individuell für jede Anwendungslandschaft erstellt wird und sich im Einzelnen stark von Inhalt und Umfang her unterscheidet, ist es kein Bestandteil des Bausteins Security oder der IsyFact.</p>
</div>
<div class="sect2">
<h3 id="authentifizierung"><a class="anchor" href="#authentifizierung"></a>1.1. Authentifizierung</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Hinweis"></i>
</td>
<td class="content">
Authentifikation: Verifikation der Identität eines natürlichen Nutzers (menschlicher <a href="../../../../glossary/latest/glossary/master.html#glossar-anwender" class="xref page">Anwender</a>) oder eines technischen Nutzers (technische Anwendung) als Zugangskontrolle zu einem geschützten System.
Dabei ist es erforderlich eindeutige Eigenschaften (z.B. biometrische Daten) oder geheime Daten (z.B. Passwort) zur Überprüfung zu übergeben.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In der Regel erfolgt die Authentifizierung von Benutzern über eine zentrale Komponente der Systemlandschaft, in welche das IT-System eingebettet ist.
Die Authentifizierung darf auch lokal, d.h. vom IT-System selbst, durchgeführt werden, falls es beispielsweise nicht in eine Systemlandschaft eingebettet ist.</p>
</div>
<div class="paragraph">
<p>Für die zentrale Authentifizierung wird in der IsyFact ein OAuth 2.0 konformes IAM-System verwendet.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Hinweis"></i>
</td>
<td class="content">
IAM steht für <a href="../../../../glossary/latest/literaturextern/inhalt.html#litextern-identity_management" class="xref page">Identity and Access Management</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Das IAM-System verwaltet <strong>Benutzer</strong> (menschliche Anwender und technische Systeme) und ihre <strong>Rollen</strong> zentral für alle Komponenten der Anwendungs- und Systemlandschaft.</p>
</div>
<div class="paragraph">
<p>Die Authentifizierung und grobgranulare Autorisierung erfolgt, gemäß der  <a href="master.html#prinzipien-der-sicherheitsarchitektur" class="xref page">Prinzipien der Sicherheitsarchitektur</a>, an den Außenschnittstellen der Systemlandschaft.
Hierbei übermittelt der Benutzer seine Authentifizierungsmerkmale (z.B. Login-Name u. Passwort) und für eine Zwei-Faktor-Authentifizierung das Behördenkennzeichen (BHKNZ) an den IAM-Service, der sie gegen die bei ihm gespeicherten Merkmale verifiziert.
Falls der IAM-Service die Auswertung des BHKNZ nicht unterstützt, wird dieses Authentifizierungsmerkmal als optional gewertet.
Nach erfolgreicher Authentifizierung gibt der IAM-Service das Authentifizierungsergebnis zusammen mit den bei ihm hinterlegten Rollen des Anwenders an das aufrufende Anwendungssystem zurück.<br>
Die Rollen allein sind jedoch noch nicht ausreichend, um den Benutzer in der Anwendung vollständig zu autorisieren.</p>
</div>
</div>
<div class="sect2">
<h3 id="autorisierung"><a class="anchor" href="#autorisierung"></a>1.2. Autorisierung</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Hinweis"></i>
</td>
<td class="content">
Autorisierung: Zustimmung oder Erlaubnis, spezieller die Einräumung von Rechten gegenüber interessierten Rechtssubjekten, gegebenenfalls als Nutzungsrecht gegenüber Dritten.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Die Autorisierung geschieht in jedem Fall im jeweiligen IT-System.
Nach der erfolgreichen Authentifizierung eines Benutzers leitet das IAM-System die Anfrage an das IT-System weiter bzw. gibt dem Aufrufer das Ergebnis der Authentifizierung zurück - angereichert mit weiteren Informationen über den Benutzer (speziell: zugeordnete Rollen).
Im aufgerufenen IT-System wird die Anfrage – je nach Schutzbedarf und Funktionalität – autorisiert.
Dazu weist das IT-System einem Benutzer anhand seiner Rollen anwendungsspezifische <strong>Rechte</strong> zu und prüft diese gegen die für die Nutzung des angefragten Service benötigten Rechte.
Wie genau Rollen und Rechte spezifiziert werden, beschreibt das Kapitel <a href="master.html#rollen-und-rechte" class="xref page">Rollen und Rechte</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sicherheitsarchitektur-eines-it-systems"><a class="anchor" href="#sicherheitsarchitektur-eines-it-systems"></a>2. Sicherheitsarchitektur eines IT-Systems</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Der Baustein Security bildet eine Komponente des Querschnitts der <a href="../../blaupausen/referenzarchitektur-it-system/master.html#einleitung" class="xref page">IsyFact Referenzarchitektur IT-Systeme</a>.
Er ist von jedem IT-System zur Autorisierung von Zugriffen und Vorgängen zu verwenden.</p>
</div>
<div class="paragraph">
<p>Die Mechanismen zur Absicherung IsyFact-konformer IT-Systeme haben zum Ziel, die Autorisierung von Zugriffen <em>systematisch</em>, <em>einheitlich</em> und <em>einfach</em> umzusetzen.</p>
</div>
<div class="paragraph">
<p>Die <strong>Systematik</strong> und Vollständigkeit der Berechtigungsprüfungen wird dadurch erreicht, dass Berechtigungsprüfungen in den IT-Systemen an definierten Stellen und auf identische Weise stattfinden.</p>
</div>
<div class="paragraph">
<p>Die <strong>Einheitlichkeit</strong> wird durch Bereitstellung der Bibliothek <code>isy-security</code> und Nutzungsvorgaben gewährleistet, die von allen IT-Systemen zu verwenden sind.
Berechtigungsprüfungen erfolgen innerhalb eines IT-Systems immer über die Bibliothek <code>isy-security</code>.</p>
</div>
<div class="paragraph">
<p>Die <strong>Einfachheit</strong> der Nutzung der Bibliothek <code>isy-security</code> wird durch weitgehende Transparenz bei der Initialisierung, kompakte Schnittstellen und deklarative (z.B. per Annotation) statt programmatischer Implementierung erreicht.</p>
</div>
<div class="sect2">
<h3 id="praemissen"><a class="anchor" href="#praemissen"></a>2.1. Prämissen</h3>
<div class="paragraph">
<p>Aus den <a href="master.html#prinzipien-der-sicherheitsarchitektur" class="xref page">Prinzipien der Sicherheitsarchitektur</a> leiten sich die folgenden Randbedingungen für die Umsetzung der Berechtigungsprüfung innerhalb eines IT-Systems ab:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Anfragen, die am Dialog (Web-App) eines IT-Systems eingehen, sind immer vorher über die mitgegebenen Authentifizierungsdaten durch das IAM-System bzw. die lokale Authentifizierung erfolgreich authentifiziert.
Durch die Authentifizierung des IAM-Systems enthält der HTTP-Header der Anfrage die Identifikation des Anwenders und dessen Rollen (in Form eines JWT Zugriffstoken).</p>
</li>
<li>
<p>Anfragen, die an einer Service-Schnittstelle (von außen über ein Service-Gateway (SGW) oder von anderen IT-Systemen innerhalb der IT-Systemlandschaft) eines IT-Systems eingehen, sind ebenso bereits authentifiziert.</p>
</li>
<li>
<p>Prozesse, die unabhängig von eingehenden Anfragen (über Dialog und Service) durch ein IT-System gestartet werden (z.B. Batch/Task), müssen zunächst einen (technischen) Nutzer gegen das IAM-System bzw. die lokale Authentifizierung erfolgreich authentifizieren, um ein JWT Access-Token zu erhalten.
Mit diesem können sie dann Services anderer IT-Systeme innerhalb derselben Anwendungslandschaft verwenden.</p>
</li>
<li>
<p>Das aufgerufene IT-System prüft das Vorhandensein eines (gültigen) Access-Tokens und übernimmt dieses mit den darin enthaltenen Anwenderinformationen in den <code>SecurityContext</code>, wobei es die Rollen des Anwenders auf systemspezifische Rechte abbildet.
Vor Ausführung des Service prüft das IT-System, ob der Anwender die dafür benötigten Rechte besitzt.</p>
</li>
<li>
<p>Innerhalb der Anwendungslandschaft eines IT-Systems wird das <code>JWT Access-Token</code> weitergegeben. Zur Stärkung der Vertrauenswürdigkeit wird jedes <code>JWT Access-Token</code> beim Eintritt in ein IT-System auf Gültigkeit und Authentizität geprüft.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Die Services eines IT-Systems können also nur mit einer gültigen Legitimation aufgerufen werden und sind so vor unberechtigter Nutzung geschützt.
Umgekehrt können die Module und Verarbeitungsprozesse innerhalb des IT-Systems sich darauf verlassen, dass ihr Aufruf legitim ist und die ihnen übergebenen Daten vertrauenswürdig sind.</p>
</div>
</div>
<div class="sect2">
<h3 id="software-architektur"><a class="anchor" href="#software-architektur"></a>2.2. Software-Architektur</h3>
<div class="paragraph">
<p>Die folgende Abbildung zeigt den logischen Aufbau für die Authentifizierung und für die Bereitstellung von Berechtigungsinformationen an die Komponenten eines IT-Systems.</p>
</div>
<div id="image-Berechtigungspruefung" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/software-architektur-berechtigungspruefung.png" alt="software architektur berechtigungspruefung">
</div>
<div class="title">Abbildung 1. Software-Architektur der Berechtigungsprüfung</div>
</div>
<div class="paragraph">
<p>Im Folgenden werden die Aufgaben und grobe Funktionsweise der Komponenten für die Autorisierung von Anfragen in einer <a href="../../../../glossary/latest/glossary/master.html#glossar-geschaeftsanwendung" class="xref page">Geschäftsanwendung</a>  erläutert.</p>
</div>
<div class="paragraph">
<p>Der Baustein <code>isy-security</code> basiert auf dem Framework Spring Security und bietet querschnittliche Funktionalität zur Authentifizierung und Autorisierung von Anfragen, die von internen oder externen Anwendungen an eine IsyFact-Anwendung gestellt werden (M2M-Kommunikation).
Die Authentifizierung und Autorisierung von Anfragen, die von menschlichen Nutzern über eine Benutzeroberfläche (Browser) gestellt werden, findet im Zuge der Einführung von Single-Page-Applications (SPAs) nicht mehr über das Backend oder den Baustein isy-security statt, sondern innerhalb des Portal-Webservers.
Ausserdem sichert der Baustein <code>isy-security</code> die Service-Schnittstellen der IsyFact-Anwendungen ab, indem er Funktionalität zur Berechtigungsprüfung anbietet. Hier wird geprüft, ob die gewährte Autorisierung auch das Recht zur Nutzung der angefragten Service-Schnittstelle beinhaltet.</p>
</div>
<div class="paragraph">
<p>Um IsyFact-spezifische Anforderungen, wie z.B. die Nutzung des Behördenkennzeichens, zu erfüllen, existiert eine Zugriffsschicht, die eben diese Funktionalität bereitstellt und den Zugriff auf Spring Security (und das IAM-System) kapselt.
Die einheitliche Zugriffsschicht für Authentifizierung und Autorisierung erleichtert zudem, durch die teilweise Übernahme bestehender Schnittstellen, die Migration von einer älteren IsyFact Version.</p>
</div>
<div class="paragraph">
<p>Der Zugriff auf den Baustein erfolgt über das Interface <code>Security</code>, das Methoden zum Erhalt von Instanzen folgender Manager bereitstellt:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Authentifizierungsmanager</code></p>
</li>
<li>
<p><code>Berechtigungsmanager</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Zusätzlich bietet das <code>Security</code>-Interface eine Zugriffsmöglichkeit auf eine Liste von allen im System hinterlegten Rollen an.</p>
</div>
<div class="paragraph">
<p>Der <code>Authentifizierungsmanager</code> ist für die Kommunikation mit dem IAM-Service über den <code>OAuth2AuthorizedClientProvider</code> zuständig.
Die Authentifizierung (Anmeldung) von internen oder externen Anwendungen verläuft über Servicemethoden, die dieser Manager anbietet.
Das Ergebnis einer erfolgreichen Authentifizierung ist die Autorisierung durch ein Access-Token, das die dem Benutzer zugeordneten Rollen enthält.
Dieses Access-Token legt die aufrufende Anwendung (bzw. das SGW als Mittelsmann) anschließend im <code>SecurityContext</code> ab und präsentiert es der aufgerufenen Service-Schnittstelle der IsyFact-Anwendung.</p>
</div>
<div class="paragraph">
<p>Über den <code>Berechtigungsmanager</code> kann die Anwendung die Rollen und anwendungsspezifischen Rechte des angemeldeten Benutzers abfragen.</p>
</div>
<div class="paragraph">
<p>Der <code>RolePrivilegeGrantedAuthoritiesConverter</code> ist für die Konvertierung der vom IAM-Service im Access-Token übermittelten Rollen des Benutzers in die anwendungsspezifischen Rechte zuständig.</p>
</div>
<div class="paragraph">
<p>Die Absicherung der Service-Schnittstellen von IsyFact-Anwendungen erfolgt über folgende AOP-Annotationen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mit der von Spring Security bereitgestellten Annotation <code>@Secured</code> werden angebotene Services der Anwendung abgesichert.
Dieser Annotation muss noch der Name eines anwendungsspezifischen Rechts mitgegeben werden, das für die Verwendung dieses Service benötigt wird.
Im Interceptor <code>SecuredInterceptor</code> wird sichergestellt, dass nur dann der Zugriff gewährt wird, wenn der angemeldete Nutzer über seine Rollen auch dieses anwendungsspezifische Recht besitzt.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Hinweis: Die Annotation <code>@Secured</code> löst die Annotation <code>@Gesichert</code> ab und ist analog dazu verwenden.</p>
</div>
<div class="paragraph">
<p>Eine Absicherung von Services auf Ebene des Ressourcenbesitzers (Resource Owner), also eines technischen Nutzers bzw. OAuth-2-Client bietet die IsyFact-Annotation <code>@Authenticate</code>.
Dieser Annotation muss noch die oauth2ClientRegistrationId mitgegeben werden, unter der der Ressourcenbesitzer in der betrieblichen Konfiguration registriert ist.
Im Interceptor <code>AuthenticateInterceptor</code> erfolgt eine Authentifizierung über die Methode <code>authentifiziere(oauth2ClientRegistrationId)</code> im Authentifizierungsmanager.
Der Service wird dann im Namen und mit den Rechten des Ressourcenbesitzers ausgeführt.</p>
</div>
<div class="paragraph">
<p>Hinweis: Die Annotation <code>@Authenticate</code> löst die Annotation <code>@NutzerAuthentifikation</code> ab und erweitert sie um die Funktion, auch hinterlegte OAuth-2-Clients authentifizieren zu können.</p>
</div>
</div>
<div class="sect2">
<h3 id="aussensicht-der-komponente-security"><a class="anchor" href="#aussensicht-der-komponente-security"></a>2.3. Schnittstelle des Bausteins Security</h3>
<div class="paragraph">
<p>Im Folgenden wird die Schnittstelle des Bausteins <code>isy-security</code> beschrieben.</p>
</div>
<div id="image-schnittstelle-security" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/security-schnittstellen.dn.svg" alt="security schnittstellen.dn">
</div>
<div class="title">Abbildung 2. Schnittstelle des Bausteins Security</div>
</div>
<div class="paragraph">
<p>Das Interface <code>Security</code> ist der zentrale Einstiegspunkt in den Baustein <code>isy-security</code>.
Bei seiner Instanziierung wird die anwendungsspezifische Rollen-Rechte-Datei eingelesen und damit der <code>Authentifizierungsmanager</code> sowie der <code>Berechtigungsmanager</code> erzeugt.
Das Interface <code>Security</code> stellt der Geschäftsanwendung die im Weiteren beschriebenen <code>Authentifizierungsmanager</code> und <code>Berechtigungsmanager</code> zur Verfügung.
Außerdem kann die Geschäftsanwendung über die Methode <code>getAlleRollen</code> eine Liste von allen im System hinterlegten Rollen erhalten.</p>
</div>
<div class="paragraph">
<p>Der <code>Authentifizierungsmanager</code> übernimmt die programmatische Authentifizierung und Autorisierung interner und externer Anwendungen durch das IAM für den Zugang zu IsyFact-Nachbaranwendungen:</p>
</div>
<div class="paragraph">
<p>Interne Anwendungen sind als Confidential Client eingestuft und verwahren ihre Authentifizierungsdaten (entweder Client-ID u. Client-Secret oder Nutzername u. Passwort) in ihrer Konfiguration (mit einer oauth2ClientRegistrationId als Schlüssel).
Die Methode <code>authentifiziere(oauth2ClientRegistrationId)</code> im Authentifizierungsmanager liest diese Authentifizierungsdaten aus der betrieblichen Konfiguration und führt damit eine OAuth2.0-konforme Authentifizierung und Autorisierung der Anwendung gegenüber dem IAM-System durch.
Dabei wird anhand des Typs der Authentifizierungsdaten der passende Authentication-Flow mit den konfigurierten Authentifizierungsdaten verwendet.</p>
</div>
<div class="paragraph">
<p>Externe Anwendungen übermitteln ihre Authentifizierungsdaten (entweder Client-ID u. Client-Secret oder Nutzername u. Passwort) mit im Header der HTTP-Anfrage an das Service-Gateway bzw. Authentication-Gateway.
Das Gateway führt damit eine OAuth2.0-konforme Authentifizierung und Autorisierung der Anwendung gegenüber dem IAM-System durch.
Dabei wird anhand des Typs der Authentifizierungsdaten der passende Authentication-Flow verwendet:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Für den Credential-Typ bzw. <em>Credential</em>-Flow <a href="#client-credential-flow">Client-Credential Flow</a> ist die Methode <code>authentifiziereClient</code> zu verwenden mit der issuerLocation als URI des IAM sowie clientId, clientSecret und optional das BHKNZ der externen Anwendung als Parameter.
Hierbei ist zu beachten, dass aktuell keine Auswertung bzw. Weiterleitung des BHKNZ an das IAM stattfindet.</p>
</li>
<li>
<p>Für den Credential-Typ bzw. <em>Credential</em>-Flow <a href="#resource-owner-password-credential-flow">Resource-Owner-Password-Credential Flow</a> die Methode <code>authentifiziereSystem</code> mit den Parametern issuerLocation als URI des IAM, clientId und clientSecret des Gateways als vermittelnden confidential client sowie username, password und optional das BHKNZ der externen Anwendung.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Der <code>Berechtigungsmanager</code> gibt Auskunft über die Rollen und Rechte des Anwenders.
Die in der Benutzeradministration dem Anwender zugewiesenen Rollen werden mithilfe einer anwendungsspezifischen Rollen-Rechte-Datei in konkrete Rechte des Anwenders für diese Anwendung umgewandelt.
Die aktuellen Rollen und Rechte des Anwenders können mit den Methoden des <code>Berechtigungsmanager</code> erfragt werden und es kann geprüft werden, ob der Anwender ein bestimmtes Recht hat.
Die Methoden <code>getRechte</code> und <code>getRollen</code> liefern die aktuell dem Anwender zugeordneten Rechte bzw. Rollen.
Mit der Methode <code>hatRecht</code> kann die Anwendung feststellen, ob der Anwender aktuell ein bestimmtes Recht besitzt, während mit <code>pruefeRecht</code> der nachfolgende Code mit dem angegebenen Recht abgesichert wird: falls der Anwender das Recht nicht hat, wird eine <code>AutorisierungFehlgeschlagenException</code> geworfen.
Mit diesen Berechtigungsabfragen kann die Geschäftsanwendung z.B. feingranular bestimmen, ob und wie der Anwender bestimmte Daten sehen oder bearbeiten kann bzw. ob und wie er bestimmte Funktionen der Anwendung benutzen kann.<br>
Ein beliebiges Attribut, das im Access-Token des Security Contexts abgelegt ist, kann mit der Methode <code>getTokenAttribute</code> gelesen werden. Mit dem Namen (String) des Attributes als Parameter liefert es den Wert des Attributes (Object).</p>
</div>
</div>
<div class="sect2">
<h3 id="aufruf-von-nachbarsystemen"><a class="anchor" href="#aufruf-von-nachbarsystemen"></a>2.4. Aufruf von Nachbarsystemen</h3>
<div class="paragraph">
<p>Ein Anwendungssystem erwartet bei einem Aufruf, dass alle notwendigen Authentifizierungs- und Autorisierungsdaten in valider und gültiger Form übergeben werden.
Folglich muss ein Anwendungssystem, das ein Nachbarsystem aufruft, diesem Aufruf ebenfalls gültige und valide Authentifzierungs- und Autorisierungsdaten mitgeben.
Im Regelfall werden diese Daten der originären Anfrage als <code>SecurityContext</code> übergeben, der mit den Daten aus dem AccessToken zuvor initialisiert, wurde.
Dies geschieht durch die <a href="#validierung-der-token">Validierung des Access-Token</a> über den Sicherheitsbaustein <code>isy-security</code> des Anwendungssystems.
Für eine fachliche und prozessbezogene Aufrufkette wird dieses <code>Access-Token</code> in allen weiteren Aufrufen wiederverwendet und unverändert weitergeleitet.</p>
</div>
<div class="paragraph">
<p>Es erfolgt an der jeweiligen Schnittstelle des Nachbarsystems eine entsprechende Transformation der Daten des <code>Access-Tokens</code> in einen <code>SecurityContext</code>.</p>
</div>
<div class="paragraph">
<p>Gemäß Referenzarchitektur ist HTTP als das Übertragungsprotokoll der <a href="../../blaupausen/referenzarchitektur/master.html#servicekommunikation" class="xref page">Servicekommunikation</a> definiert.
Dazu sind an den Schnittstellen meist dedizierte Consumer-Provider-Bibliotheken vorgesehen, die bereits die Logik zur Transformation und  Weiterleitung des <code>Access-Tokens</code> übernehmen.</p>
</div>
<div class="paragraph">
<p>Gibt es diese Bibliotheken nicht an den Schnittstellen, dann muss das Nachbarsystem direkt aufgerufen werden.
Hierbei muss das aufrufende Anwendungssystem stets das <code>Access-Token</code> manuell in den Header der ausgehenden Nachricht schreiben.
Weitere Details hierzu sind im Kapitel <a href="#authentifizierung-und-autorisierung">Authentifizierung &amp; Autorisierung</a> beschrieben.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="oauth2.0-und-openidconnect"><a class="anchor" href="#oauth2.0-und-openidconnect"></a>3. OAuth2.0 und OpenIDConnect</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OAuth 2.0 ist ein offenes Autorisierungsprotokoll, das eine standardisierte, sichere API-Autorisierung für Desktop-, Web- und Mobile-Anwendungen erlaubt.
Ein (menschlicher) Endbenutzer kann mithilfe eines Autorisierungsservers (IAM-Service) einer Anwendung den Zugriff auf seine (geschützten) Daten erlauben (Autorisierung), die von einem anderen Service bereitgestellt werden, ohne geheime Details seiner Zugangsberechtigung (Authentifizierung) der Anwendung preiszugeben.
Der Endbenutzer kann so der Anwendung gestatten, in seinem Namen einen Service zu benutzen.
Dazu wird der Endbenutzer auf eine Login-Seite des Autorisierungsservers (IAM-Service) umgeleitet und nach erfolgreicher Authentifizierung zurück in die Anwendung.
Dabei wird die Übermittlung von vertraulichen Daten wie z.B. Passwörtern an die Anwendung vermieden.
Bei M2M-Kommunikation (Machine to Machine) enthält die Konfiguration der Anwendung die zur Authentifizierung notwendigen Daten des dafür verwendeten technischen Nutzers (Client), die direkt an den IAM-Service geschickt werden.
Bei erfolgreicher Authentifizierung erhält die Anwendung ein Access-Token (Zugriffstoken), eine Art 'Freibrief' für die Anwendung, mit dem der IAM-Service das Zugangsrecht bestätigt.</p>
</div>
<div class="paragraph">
<p>OpenID Connect (OIDC) ist ein offenes Identitätsprotokoll, das die Autorisierungs- und Authentifizierungsmechanismen von OAuth 2.0 nutzt und als Schicht oberhalb des OAuth-Frameworks Anwendungen ermöglicht, zusätzlich zur oben beschriebenen Autorisierung auch grundlegende Profilinformationen des Benutzers auf interoperable Weise zu erhalten.
Die Implementierung von OpenID Connect basiert auf der Ausstellung von ID-Tokens, auf einer REST-Schnittstelle und auf dem Datenformat JSON.</p>
</div>
<div class="sect2">
<h3 id="oauth2.0-zur-autorisierung"><a class="anchor" href="#oauth2.0-zur-autorisierung"></a>3.1. OAuth2.0 zur Autorisierung</h3>
<div class="paragraph">
<p>OAuth 2.0 ist ein Autorisierungsprotokoll und kein Authentifizierungsprotokoll.
Als Solches ist es in erster Linie dafür vorgesehen, den Zugriff auf bestimmte Ressourcen zu ermöglichen, beispielsweise externe APIs oder Nutzerdaten.<br>
OAuth 2.0 nutzt Access-Tokens.
Access-Tokens sind Daten, die die Autorisierung zum Zugriff auf Ressourcen für den Endnutzer darstellen.
OAuth 2.0 definiert kein spezielles Format für Zugriffstokens, in der Regel wird jedoch das „JSON Web Token (JWT)“-Format genutzt.
Dieses ermöglicht es dem Aussteller der Access-Tokens, weitere Daten in das Access-Token selbst aufzunehmen.
Aus Sicherheitsgründen sollten Access-Tokens außerdem ein Ablaufdatum besitzen.</p>
</div>
<div class="paragraph">
<p>In OAuth 2.0 gibt es folgende vier Rollen bzw. beteiligte Parteien:</p>
</div>
<div class="paragraph">
<p><strong>Ressourcenbesitzer (Resource Owner)</strong></p>
</div>
<div class="paragraph">
<p>Eine Person oder ein System, das berechtigt ist, auf eine geschützte Ressource zuzugreifen.<br>
Beispiel: Anwender, technischer Nutzer.<br>
Wir übernehmen für die IsyFact die konkrete Ausprägung "Anwender", "Technischer Nutzer", "Client".</p>
</div>
<div class="paragraph">
<p><strong>Ressourcen-Server bzw. Anwendungssystem (Resource Server)</strong></p>
</div>
<div class="paragraph">
<p>Der Server, in dem die geschützte Ressource liegt und der in der Lage ist, auf Anfragen an diese geschützte Ressource zu reagieren, wenn sie ein Access-Token enthalten.<br>
Beispiel: Geschäftsanwendung<br>
Wir übernehmen für die IsyFact die IsyFact-spezifische Bezeichnung "Anwendungssystem".</p>
</div>
<div class="paragraph">
<p><strong>Anwendung (Client)</strong></p>
</div>
<div class="paragraph">
<p>Eine vom Ressourcenbesitzer gesteuerte Anwendung, die in seinem Namen eine geschützte Ressource verwenden möchte.
Der Begriff 'Client' impliziert hier nicht bestimmte Implementierungscharakteristiken, sondern den Teil der Anwendung, mit der der Ressourcenbesitzer interagiert.<br>
Beispiel: Batch. <br>
Handelt es sich bei der Anwendung um eine Backend-Anwendung, so wird diese als "Confidential Client" bezeichnet.
Wir übernehmen für die IsyFact die englische Bezeichnung "Client".</p>
</div>
<div class="paragraph">
<p><strong>IAM-Service (Authorization Server)</strong></p>
</div>
<div class="paragraph">
<p>Der Service, der nach erfolgreicher Authentifizierung und Autorisierung des Ressourcenbesitzers, Access-Tokens ausstellt.
Bei erhöhtem Sicherheitsbedarf kann der Ressourcen-Server eine Prüfung der Gültigkeit des Access-Tokens durch den IAM-Service veranlassen.
So können auch z.B. zurückgezogene (Revoked) Tokens erkannt und abgelehnt werden.
Beispiel: Keycloak (Produkt). <br>
Wir übernehmen für die IsyFact die IsyFact-spezifische Bezeichnung "IAM-Service".</p>
</div>
<div class="paragraph">
<p>Weitere wichtige Begriffe sind:</p>
</div>
<div class="paragraph">
<p><strong>Ressource (Resource)</strong></p>
</div>
<div class="paragraph">
<p>Daten oder andere Betriebsmittel, die durch ein Nutzungsrecht vor unbefugtem Zugang geschützt sind. <br>
Wir übernehmen für die IsyFact die deutsche Bezeichnung "Ressource".</p>
</div>
<div class="paragraph">
<p><strong>Access-Token</strong></p>
</div>
<div class="paragraph">
<p>Berechtigungsnachweis für den Zugang zu einer geschützten Ressource.
Der Inhalt ist für den Client meist nicht lesbar, er gibt es einfach weiter an den Ressourcen-Server.
Er gilt für einen spezifischen Bereich und nur für eine bestimmte Zeit.<br></p>
</div>
<div class="paragraph">
<p><strong>Refresh-Token</strong></p>
</div>
<div class="paragraph">
<p>'Meta'-Berechtigungsnachweis: Ermöglicht dem Client, ein neues Access-Token vom IAM-Service zu erhalten, ohne dass der Ressourcenbesitzer sich erneut ausweisen muss.
Dieses neue Access-Token kann z.B. ein späteres Ablaufdatum (autom. Nutzungsverlängerung) oder andere Rechte (innerhalb aller an den Ressourcenbesitzer vergebenen Rechte) aufweisen. <br>
Wir übernehmen für die IsyFact die englische Bezeichnung "Refresh-Token".</p>
</div>
</div>
<div class="sect2">
<h3 id="openidconnect-zur-authentifizierung"><a class="anchor" href="#openidconnect-zur-authentifizierung"></a>3.2. OpenIDConnect zur Authentifizierung</h3>
<div class="paragraph">
<p>OpenID Connect ist eine Identitätsschicht über dem OAuth 2.0-Protokoll und ist eine Erweiterung und nicht Teil des OAuth2.0-Protokolls.
Es ermöglicht Clients, die Identität des Endbenutzers basierend auf der von einem Autorisierungsserver durchgeführten Authentifizierung zu überprüfen und grundlegende Profilinformationen über den Endbenutzer auf interoperable und REST-ähnliche Weise zu erhalten.</p>
</div>
<div class="paragraph">
<p>OpenID Connect ermöglicht es Clients aller Art, einschließlich webbasierter, mobiler und JavaScript-Clients, Informationen über authentifizierte Sitzungen und Endbenutzer anzufordern und zu erhalten.</p>
</div>
<div class="paragraph">
<p>Der Baustein <code>Security</code> bietet keine direkte OpenID Connect Unterstützung.
Für den Transport von Benutzerinformationen, wie z.B. BHKNZ, wird das Access-Token verwendet.</p>
</div>
<div class="paragraph">
<p>OpenID Connect Abfragen zur Identität eines Benutzers, OpenID-Token oder Custom-Token müssen in der Anwendung implementiert werden.</p>
</div>
</div>
<div class="sect2">
<h3 id="authentifizierung-und-autorisierung"><a class="anchor" href="#authentifizierung-und-autorisierung"></a>3.3. Authentifizierung &amp; Autorisierung</h3>
<div class="sect3">
<h4 id="aufruf-weboberflaeche-portal"><a class="anchor" href="#aufruf-weboberflaeche-portal"></a>3.3.1. Aufruf Web-Oberfläche/Portal</h4>
<div class="paragraph">
<p>Damit ein Anwender eine geschützte Anwendung über deren Web-Oberfläche (im Web-Browser) aufrufen kann, muss er über den IAM-Service authentifiziert und dazu autorisiert sein.
Die IsyFact folgt der Empfehlung des OAuth 2.0 Frameworks und definiert den <em>Authorization Code Flow</em> als Authentifizierungsweg.
Dieser Ablauf stellt sicher, dass zum einen nur der IAM-Service die Authentifizierungsdaten des Nutzers erfährt und zum anderen, dass die Web-Oberfläche (Web-Client) keinen Zugriff auf das Access-Token bekommt.</p>
</div>
<div class="paragraph">
<p>Als Voraussetzung für diesen Flow ist die Bereitstellung eines Vermittlers ('Relying Party') notwendig, der die Kommunikation zwischen Web-Oberfläche und Autorisierungsserver verwaltet.
Dieser Vermittler muss ein OAuth2.0 <em>Confidential Client</em> sein, also ein serverseitiges System.
Dies kann ein als Reverse Proxy konfigurierter Webserver sein (z.B. Apache http-Server mit <code>mod_auth_openidc</code> Modul), der zwischen  Web-Client (Web-Browser) und Web-Anwendung geschaltet ist.
Das Webserver-Modul <code>mod_auth_openidc</code> koordiniert den Ablauf des <em>Authorization Code Flow</em> mit <em>Confidential Client</em> zwischen Nutzer und dem IAM-Service und verwaltet das Access-Token - der Baustein Security wird hierfür nicht verwendet.
Die folgende Abbildung zeigt die System-Architektur mit dem Webserver in der Informations- u. Dienstezone vor der Anwendung und dem IAM-Service in der Logik- u. Verarbeitungszone.</p>
</div>
<div id="image-Authorization-Code-Connections" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/authorization-code-connections.dn.svg" alt="authorization code connections.dn">
</div>
<div class="title">Abbildung 3. Beteiligte Systeme bei Aufruf über Web-Oberfläche / Portal</div>
</div>
<div class="paragraph">
<p>Ein menschlicher Nutzer, der eine Anwendung über deren Web-Oberfläche (im Web-Browser) bedienen möchte, ist im Besitz von Authentifizierungsdaten (Nutzername u. Passwort), mit denen er sich gegenüber dem IAM-System ausweisen kann.
Wenn für einen Anwender (noch) keine gültige Session vorhanden ist, leitet der Webserver auf die Login-Seite des IAM-Systems um.
Die hier eingegebenen Authentifizierungsdaten gelangen ausschließlich zum IAM-Service, wo sie geprüft werden.
Bei positiver Authentifizierung stellt der IAM-Service erstmal einen kurzlebigen <em>Authorization Code</em> aus.
Das ist eine schwer erratbare zufällige Zeichenkette und hat nur einen Zweck:
Tausch gegen das Access-Token (u. Refresh-Token) im nächsten Teil des <em>Authorization Code Flow</em>.
Das ist notwendig, um sicherzustellen, dass das Access-Token an den ursprünglichen Initiator des Aufrufs ausgeliefert wird und nicht z.B. eine Redirection URI Manipulation stattgefunden hat.
Mit dem Erhalt des Access-Tokens (u. Refresh-Token) ist die Autorisierung durch das IAM-System erfolgreich abgeschlossen.
Das <code>mod_auth_openidc</code> Modul speichert das Access-Token (u. Refresh-Token) in der <em>User-Session</em> und leitet es bei jeder Interaktion mit der Anwendung an die Web-Anwendung weiter - bis die Session beendet wird.
Das nachfolgende Sequenzdiagramm zeigt noch einmal schematisch den logischen und zeitlichen Ablauf sowie das Zusammenspiel der System-Komponenten im <em>Authorization Code Flow</em> mit <em>Confidential Client</em>:</p>
</div>
<div id="image-Authorization-Code-Flow" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/authorization-code-flow.dn.svg" alt="authorization code flow.dn">
</div>
<div class="title">Abbildung 4. Ablauf Authentifizierung bei Aufruf über Web-Oberfläche / Portal für single page applications (SPA)</div>
</div>
</div>
<div class="sect3">
<h4 id="aufruf-service-gateway"><a class="anchor" href="#aufruf-service-gateway"></a>3.3.2. Aufruf Service-Gateway</h4>
<div class="paragraph">
<p>Anfragen von <em>externen Anwendungssystemen</em> an ein IsyFact-Anwendungssystem, müssen über den IAM-Service authentifiziert und zur Nutzung des aufgerufenen IsyFact-Service autorisiert werden.
Um das zu gewährleisten, ist in der Informations- und Dienstezone ein <em>Service-Gateway (SGW)</em> zwischen der externen Anwendung und dem internen IsyFact-Service geschaltet.
Das Service-Gateway nimmt diese fachliche Anfrage von Außen entgegen, leitet diese zur Authentifizierung an den IAM-Serive und bei Erfolg wird die fachliche Anfrage inklusive der Rollen und Rechte an den internen IsyFact-Service weitergeleitet, der dann die noch ausstehende Autorisierung auf Basis der Rollen und Rechte selbst initiiert, bevor er mit der eigentlichen fachlichen Bearbeitung beginnen kann.</p>
</div>
<div class="sect4">
<h5 id="aufruf-service-gateway-ohne-authentication-gateway"><a class="anchor" href="#aufruf-service-gateway-ohne-authentication-gateway"></a>3.3.2.1. Authentifizierung über das SGW am IAM-Service</h5>
<div class="paragraph">
<p>Aktuell erfolgt die Authentifizierung von Anfragen externer Anwendungen immer über das Service-Gateway.
Dafür müssen bei jeder Anfrage der externen Anwendung immer auch die Authentifizierungsdaten mitgeschickt werden.
Das Service-Gateway lässt die Authentifizierungsdaten durch den IAM-Service prüfen und leitet erst nach dessen OK die fachliche Anfrage an das Anwendungssystem weiter - jetzt zusammen mit dem Access-Token.</p>
</div>
<div class="paragraph">
<p>Die nachfolgende Abbildung zeigt die System-Architektur, die bei Aufrufen von externen Anwendungen für die Authentifizierung ohne <em>Authentication-Gateway</em> zum Einsatz kommt.</p>
</div>
<div class="paragraph">
<p>So muss der verwendete technische Nutzer für diese externe Anwendung noch nicht gemäß <em>SpringSecurity (OAuth2.0)</em> auf einen <em>OAuth2.0 Client</em> (mit Client-ID u. Client-Secret) migriert worden sein, sondern es kann nach wie vor ein technischer Nutzer (mit Username u. Passwort) zur Authentifizierung verwendet werden.
Die externe Anwendung sendet die Authentifizierungsdaten bei jeder fachlichen Anfrage nur an das Service-Gateway.
Das Service-Gateway initiiert die Authentifizierung über den Baustein <code>isy-security</code>, erhält ein gültiges Access-Token vom IAM-Service und leitet dann die fachliche Anfrage direkt an die Geschäftsanwendung weiter.
Das Access-Token wird nicht an die externe Anwendung ausgeliefert, daher muss jede fachliche Anfrage der externen Anwendung erneut authentifiziert werden, obwohl das vorherige Access-Token noch gültig wäre.</p>
</div>
<div id="image-servicegateway-ohne-authgateway" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/ServiceGateway-Authentifizierung.dn.svg" alt="ServiceGateway Authentifizierung.dn">
</div>
<div class="title">Abbildung 5. Authentifizierung ohne Authentication-Gateway</div>
</div>
<div class="paragraph">
<p>Im Service-Gateway werden die Authentifizierungsdaten aus der Anfrage herausgelöst und an den <em>IAM-Service</em> weitergeleitet.
Im IAM-Service erfolgt dann mit den übergebenen Authentifizierungsdaten die eigentliche Authentifizierung.
Dabei wird neben der neuen Authentifizierungslogik des <em>Client-Credential-Flows</em> auch die bisherige Authentifizierungslogik des <em>Resource-Owner-Password-Credentials-Flows</em> unterstützt.
Der <em>Client-Credential-Flow</em> dient dabei der Authentifizierung eines Clients und über den <em>Resource-Owner-Password-Credentials-Flow</em> erfolgt die Authentifizierung eines technischen Nutzers.
Mit validen Authentifizierungsdaten und erfolgreicher Authentifizierung liefert der IAM-Service dann ein valides, neu erstelltes Access-Token an das Service-Gateway zurück.</p>
</div>
<div class="paragraph">
<p>Mit Erhalt eines gültigen Access-Tokens leitet das Service-Gateway die fachliche Anfrage zusammen mit dem Token an das eigentliche Anwendungssystem weiter.
In der Anwendung kann anschließend die Ausführungsberechtigung des Benutzers verifiziert und sichergestellt werden.</p>
</div>
<div class="paragraph">
<p>Das nachfolgende Sequenzdiagramm zeigt schematisch den logischen Ablauf der Authentifizierung und Autorisierung im Zusammenspiel der System-Komponenten mit dem <em>Service-Gateway</em> aber ohne <em>Authentication-Gateway</em>:</p>
</div>
<div id="image-sequenzdiagramm-sgw-without-agw" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/Squenzdiagramm_ServiceGateway_ohne_AuthGateway.dn.svg" alt="Squenzdiagramm ServiceGateway ohne AuthGateway.dn">
</div>
<div class="title">Abbildung 6. Sequenzdiagramm Authentifizierung ohne Authentication-Gateway</div>
</div>
<div class="paragraph">
<p>Die Authentifizierung über das SGW (Service Gateway) stellt einen wichtigen Schritt in der Sicherung von Anwendungen dar.
Um diesen Prozess effektiv umzusetzen, empfiehlt sich die Verwendung der Methode <code>authentifiziereClient</code> des neu entwickelten Authentifizierungsmanagers.
Mit dessen Hilfe ist es möglich, den Client zu authentifizieren und sicherzustellen, dass nur autorisierte Clients Zugriff auf die Ressourcen erhalten.
Durch die Nutzung dieses speziellen Authentifizierungsmechanismus wird eine robuste und zuverlässige Sicherheitsschicht implementiert, um unautorisierten Zugriff und potenzielle Sicherheitslücken zu verhindern.</p>
</div>
<div class="paragraph">
<p>Weitere Informationen und detaillierte Anleitungen zur Verwendung der <code>authentifiziereClient</code>-Methode können in der entsprechenden Dokumentation des Authentifizierungsmanagers oder in den Nutzungsvorgaben xref:nutzungsvorgaben/inhalt.adoc#authentifizierungsmanager-interface gefunden werden.</p>
</div>
<div class="paragraph">
<p>In einer zukünftigen Version von <code>IsyFact</code> wird in einer neu eingeführten aber separierten Komponente der Anwendungslandschaft (<em>Authentication-Gateway</em>) eine neue Authentifizierungslogik (<a href="#aufruf-service-gateway-mit-authentication-gateway">Direkte Authentifizierung am IAM-Service</a>) für die Authentifizierung von Anwendungen eingeführt.
Die Authentifizierung wird von der eigentlichen fachlichen Anfrage getrennt, so dass sie nur einmal durchgeführt werden muss und das erhaltene Access-Token (innerhalb seiner Gültigkeit) auch für die weiteren fachlichen Anfragen verwendet werden kann.</p>
</div>
</div>
<div class="sect4">
<h5 id="aufruf-service-gateway-mit-authentication-gateway"><a class="anchor" href="#aufruf-service-gateway-mit-authentication-gateway"></a>3.3.2.2. Direkte Authentifizierung am IAM-Service</h5>
<div class="paragraph">
<p>Die folgende Abbildung zeigt die neue System-Architektur, die bei Aufrufen von externen Anwendungen zum Einsatz kommt.
Für die Authentifizierung einer externen Anwendung existiert ein eigener Servicepunkt zum <em>Authentication-Gateway</em>, der zuerst aufgerufen werden muss und ein Access-Token zurückliefert.
Anschliessend wird die fachliche Anfrage (und alle weiteren) zusammen mit diesem Access-Token über das <em>Service-Gateway (SGW)</em> an das Anwendungssystem geschickt.</p>
</div>
<div id="image-servicegateway-plus-authgateway" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/ServiceGateway_plus_AuthGateway.dn.svg" alt="ServiceGateway plus AuthGateway.dn">
</div>
<div class="title">Abbildung 7. Authentifizierung am Authentication-Gateway</div>
</div>
<div class="paragraph">
<p>Damit ein Client einer externen Anwendung auf die Ressourcen einer Anwendung zugreifen kann, benötigt er ein gültiges Access-Token.
Dieses Token muss sich der Client zuerst beschaffen, indem er sich beim <em>IdentityAccessManagement-Service (IAM-Service)</em> authentifiziert.
Mit der Einführung des <em>Authentication-Gateways</em> werden somit alle Anfragen mit Authentifizierungsdaten über einen separaten Kommunikationskanal geleitet.
Damit kommt keine mit der Authentifizierung involvierte Komponente mit späteren Anwendungsanfragen in Kontakt und umgekehrt.</p>
</div>
<div class="paragraph">
<p>Die externe Anwendung sendet ihre Authentifizierungsdaten an das <em>Authentication-Gateway</em>, das die Anfrage an den IAM-Service weiterleitet.
Im IAM-Service erfolgt dann mit den übergebenen Authentifizierungsdaten die eigentliche Authentifizierung.
Dabei wird neben der neuen Authentifizierungslogik des <em>Client-Credential-Flows</em> auch die bisherige Authentifizierungslogik des <em>Resource-Owner-Password-Credentials-Flows</em> unterstützt.
Der <em>Client-Credential-Flow</em> dient dabei der Authentifizierung eines technischen Clients und über den <em>Resource-Owner-Password-Credentials-Flow</em> erfolgt die Authentifizierung eines technischen Nutzers.
Mit validen Authentifizierungsdaten und erfolgreicher Authentifizierung liefert der IAM-Service dann ein valides, neu erstelltes Access-Token an die externe Anwendung zurück.</p>
</div>
<div class="paragraph">
<p>Mit Erhalt eines gültigen Access-Tokens kann nun die externe Anwendung ihre fachlichen Aufrufe zusammen mit dem Token über das <em>Service-Gateway</em> an das eigentliche Anwendungssystem senden.
Denn in dem Access-Token sind alle notwendigen Informationen enthalten, um im <em>Service-Gateway</em> eine Validierung auf eine zuvor stattgefundene und gültige Authentifizierung, sowie eine Prüfung auf eine valide Autorisierung des Requests vorzunehmen.
So sind neben einer Gültigkeitsdauer auch die für den Benutzer autorisierten Rollen in dem Token enthalten, sodass im Anwendungssystem die Ausführungsberechtigung des Benutzers verifiziert und sichergestellt werden kann.</p>
</div>
<div class="paragraph">
<p>Das nachfolgende Sequenzdiagramm zeigt noch einmal schematisch den logischen Ablauf der Authentifizierung und Autorisierung im Zusammenspiel der System-Komponenten und dem Authentication-Gateway:</p>
</div>
<div id="image-sequenzdiagramm-sgw-plus-agw" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/Squenzdiagramm_ServiceGateway_plus_AuthGateway.dn.svg" alt="Squenzdiagramm ServiceGateway plus AuthGateway.dn">
</div>
<div class="title">Abbildung 8. Sequenzdiagramm Authentifizierung am Authentication-Gateway</div>
</div>
</div>
<div class="sect4">
<h5 id="autorization-grant"><a class="anchor" href="#autorization-grant"></a>3.3.2.3. Autorisierungsverfahren</h5>
<div class="paragraph">
<p>Mit SpringSecurity(OAuth2.0) werden die vier Berechtigungszuteilungsverfahren <em>Authorization-Code-Credentials</em>, <em>Implicit-Credentials</em>, <em>Resource-Owner-Password-Credentials</em> und <em>Client-Credentials</em> spezifiziert.
In IsyFact spielen davon bei den externen Anwendungsaufrufen über ein <em>Service-Gateway</em> die beiden Verfahren <em>Resource-Owner-Password-Credential</em> und <em>Client-Credential</em> ein Rolle, da es sich hierbei um die Berechtigungszuteilung für ausschließlich <em>Confidential-Clients</em> dreht.</p>
</div>
<div class="sect5">
<h6 id="resource-owner-password-credential-flow"><a class="anchor" href="#resource-owner-password-credential-flow"></a>3.3.2.3.1. Resource-Owner-Password-Credential Flow</h6>
<div class="sidebarblock">
<div class="content">
<div class="title"><span class="icon"><i class="fa fa-ban"></i></span> Deprecation</div>
<div class="paragraph">
<p>Dieser Teil der Dokumentation ist veraltet und wird in einem zukünftigen Release entfernt.
Die Inhalte sollten zur Entwicklung neuer Anwendungen nicht mehr berücksichtigt werden.
Stattdessen wird empfohlen, <a href="#client-credential-flow">Client-Credential Flow</a> zu verwenden.</p>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>Anmerkung zur Deprecation</strong></p>
</div>
<div class="paragraph">
<p>Dieser Flow soll gemäß OAuth2.0 Vorgaben nicht mehr verwendet werden und wird in zukünftigen Versionen aus dem OAuth-Standard entfernt.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Der <em>Resource-Owner-Password-Credential</em>-Flow, der als Authentifizierungsdaten die Attribute <code>Username</code> und <code>Passwort</code> verwendet, sollte nur eingesetzt werden, wenn die involvierte Client-Anwendung ein hohes Vertrauen zur Wahrung der Authentifizierungsdaten sicherstellt oder wenn keine andere Art der Berechtigungszuteilung verfügbar ist.
So wird die Authentifizierung für einen techn. Nutzer über diesen Authorization-Flow abgebildet.</p>
</div>
<div id="image-resourceowner-password-credential-flow" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/Resource-Owner-Passwort-Credential-Flow.dn.svg" alt="Resource Owner Passwort Credential Flow.dn">
</div>
<div class="title">Abbildung 9. OAuth2.0 Resource-Owner-Password-Credential Flow</div>
</div>
<div class="paragraph">
<p>Im vorherigen Bild wird der logische Ablauf des <em>Resource-Owner-Password-Credential</em>-Flows dargestellt.
Hierbei wird die Konfiguration des techn. Nutzers als der <em>Resource-Owner</em> dargestellt.</p>
</div>
<div class="paragraph">
<p>Einem <em>Confidential Client</em> wird die Konfiguration (1.) eines techn. Nutzers mit den Authentifizierungsdaten <code>Username</code> und <code>Passwort</code> zugeordnet.
Die so konfigurierte (Confidential-Client)-Anwendung schickt (2.) dann diese Authentifizierungsdaten an den IAM-Service.
Im IAM erfolgt mit den so übergebenen Authentifizierungsdaten die Authentifizierung, die im Ergebnis ein gültiges Access-Token als Antwort (3.) zurückgeliefert.
Die Client-Anwendung kann, mit dem so erhaltenen Access-Token, dann ihre Fachanwendungen aufrufen.
Das Access-Token enthält alle notwendigen Daten, um zu verifizieren, ob die aufrufende Anwendung ordnungsgemäß authentifiziert und autorisiert ist.</p>
</div>
</div>
<div class="sect5">
<h6 id="client-credential-flow"><a class="anchor" href="#client-credential-flow"></a>3.3.2.3.2. Client-Credential Flow</h6>
<div class="paragraph">
<p>Der <em>Client-Credential</em>-Flow wird und darf nur zur Berechtigungszuteilung eingesetzt werden, wenn die Client-Anwendung selbst auch der Besitzer der Authentifizierungsdaten und damit als Confidential-Client-Anwendung eingestuft ist.
Dieser Credential-Flow ist nach SpringSecurity OAuth2.0 auch die einzige Möglichkeit einen technischen Nutzer (Client) zu authentifizieren.
Es erfolgt hierbei keine Interaktion durch einen Benutzer, der sein Passwort eingeben müsste, sondern die Schritte zur Authentifizierung und Autorisierung der Client-Anwendung laufen selbständig als Hintergrundprozess analog einer Batch-Anwendung ab.
Die dabei verwendeten Authentifizierungsdaten <code>Client-ID</code> und <code>Client-Secret</code> müssen vor der Nutzung für die Client-Anwendung definiert und mit dem IAM-System abgestimmt sein.</p>
</div>
<div id="image-clientcredential-flow" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/Client-Credential-Flow.dn.svg" alt="Client Credential Flow.dn">
</div>
<div class="title">Abbildung 10. OAuth2.0 Client-Credential Flow</div>
</div>
<div class="paragraph">
<p>Im vorherigen Bild wird der logische Ablauf des <em>Client-Credential</em>-Flows dargestellt.
Hierbei kann die Client-Anwendung nach einem Access-Token beim IAM anfragen (1.), indem sie dabei ihre eigenen Client-Authentifizierungsdaten oder anderweitig unterstützte Authentifizierungskriterien verwendet.
Die Authentifizierung mit diesen so übermittelten Authentifizierungsdaten erfolgt dann im IAM-Service.
Bei erfolgreicher Authentifizierung wird (2.) ein gültiges Access-Token als Antwort zurückgeliefert.
Mit dem so erhaltenen Access-Token kann die Client-Anwendung dann ihre Fachanwendungen aufrufen.
Das Access-Token enthält alle notwendigen Daten, um zu verifizieren, ob die aufrufende Anwendung ordnungsgemäß authentifiziert und autorisiert ist.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ausfuehrung-batch-u-task"><a class="anchor" href="#ausfuehrung-batch-u-task"></a>3.3.3. Ausführung Batch &amp; Task</h4>
<div class="sect4">
<h5 id="absicherung-batch"><a class="anchor" href="#absicherung-batch"></a>3.3.3.1. Absicherung eines Batches</h5>
<div class="paragraph">
<p>Gemäß der IsyFact-Systemlandschaft - siehe <a href="../../blaupausen/detailkonzept-komponente-batch/master.html#grobe-architektur-des-batchrahmens" class="xref page">Grobe Architektur des Batchrahmens</a> - ist ein Batch teil eines Anwendungssystems und setzt sich - siehe <a href="#image-awlogbat">Fachliche Architektur eines Batch in der Anwendungslandschaft</a> - aus den Komponenten (1) Batch-Logik und -Steuerung sowie den dabei eingesetzten (2) Fachkomponenten zusammen.
Da die Absicherung zur Ausführung eines Batches immer ohne User-Interaktionen stattfindet, ist dieser als <em>Confidential Client</em> einzustufen, weil er in der Lage sein muss, die notwendige Vertraulichkeit zur Wahrung seiner Anmeldeinformationen sicherzustellen.</p>
</div>
<div id="image-awlogbat" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/AnwLogBat.dn.svg" alt="AnwLogBat.dn">
</div>
<div class="title">Abbildung 11. Fachliche Architektur eines Batches in der Anwendungslandschaft</div>
</div>
<div class="paragraph">
<p>Ein Batch wird über ein Batch-Client oder Startprogramm – meist ein Shellscript, UC4, JobNetz, CronJob, o.ä. – initialisiert und gestartet.
Diese Batch-Clients sind systemseitig dazu berechtigt, den dedizierten Batch auszuführen und damit zu starten.
Somit ruft der Batch-Client die Komponente <em>Batch-Logik</em> in der Nutzungsschicht der Anwendung auf, die die notwendigen Initialisierungen vornimmt.
Genau hier erfolgt frühzeitig die Unterscheidung welcher <em>Credential</em>-Flow (<a href="#resource-owner-password-credential-flow">Resource-Owner-Password-Credential Flow</a> oder <a href="#client-credential-flow">Client-Credential Flow</a>) zur Authentifizierung und Autorisierung des Batch verwendet werden soll.</p>
</div>
<div class="paragraph">
<p>Die Abbildung <a href="#image-sequenzdiagramm-absicherung-batch">Absicherung eines Batch</a> stellt den logischen Ablauf zur Absicherung eines Batches skizzenhaft dar.</p>
</div>
<div id="image-sequenzdiagramm-absicherung-batch" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/Sequenzdiagramm_AbsicherungBatch.dn.svg" alt="Sequenzdiagramm AbsicherungBatch.dn">
</div>
<div class="title">Abbildung 12. Absicherung eines Batches</div>
</div>
<div class="paragraph">
<p>Über die Batch-Konfiguration wird gesteuert, ob der Batch mit einem <em>Technischen Nutzer</em> und den zugehörigen Authentifizierungsdaten <code>Benutzer</code> und <code>Passwort</code> über den <a href="#resource-owner-password-credential-flow">Resource-Owner-Password-Credential Flow</a> authentifiziert und autorisiert wird oder mit einem <em>Client</em> und den zugehörigen Authentifizierungsdaten <code>Client-ID</code> und <code>Client-Secret</code> über den <a href="#client-credential-flow">Client-Credential Flow</a>.</p>
</div>
<div class="paragraph">
<p>Je nach verwendetem <em>Credential</em>-Flow erfolgt mit den jeweiligen erhaltenen Authentifizierungsdaten des Batch-Nutzers dann die eigentliche Authentifizierung durch den IAM-Service der Plattform.
Dazu werden die im Baustein <code>isy-security</code> bereitgestellten <a href="#aussensicht-der-komponente-security">Schnittstellen</a> genutzt.</p>
</div>
<div class="paragraph">
<p>Im IAM-Service wird zu den übergebenen <em>Authentifizierungsdaten</em> der dort verwaltete Benutzer ermittelt und validiert.
Bei erfolgreicher Authentifizierung wird aus den Benutzerdaten ein <em>Access-Token</em> generiert.
Dieses Token beinhaltet alle notwendigen Informationen - siehe <a href="#inhalte-der-token">Inhalte der Access-Token</a>, um eine Authentifizierung und Autorisierung an den nachfolgenden Aufrufen von Fachkomponenten durchführen zu können.
Das IAM-System liefert das so generierte <em>Access-Token</em> an die aufrufende Komponente zurück.</p>
</div>
<div class="paragraph">
<p>Im Sicherheitsbaustein <em>isy-security</em> wird zur weiteren Verwendung aus dem <em>Access-Token</em> ein <code>SecurityContext</code> initialisiert und aufbereitet, der somit alle notwendigen Informationen wie das <em>Access-Token</em>, dem Nutzer zugeordnete Rollen, etc. enthält.
Für die weiteren Prozessschritte im Batch wird dieses <em>Access-Token</em>  immer weitergereicht, sodass dieser bei der Ausführung seiner Fachanwendungen sich entsprechend diesen gegenüber authentifizieren und autorisieren kann.</p>
</div>
<div class="paragraph">
<p>Um sicherzustellen, dass ein Batch über seine gesamte Laufzeit ein gültiges <em>Access-Token</em> besitzt und sich jederzeit an den Fachanwendungen authentifizieren und autorisieren kann, sollte der Batch die Gültigkeitsdauer des <em>Access-Tokens</em> prüfen.
Sollte die Gültigkeitsdauer des <em>Access-Tokens</em> kleiner sein als die vorgegebene bzw. konfigurierbare Mindestgültigkeitsdauer, dann muss der Batch das <em>Access-Token</em> durch eine erneute Authentifizierung erneuern.
Das so erneuerte <em>Access-Token</em> kann nun wieder für ein oder mehrere Verarbeitungszyklen verwendet werden, ohne dass es in den eventuell kaskadierend aufgerufenen Fachanwendungen zu einem Fehler mangels gültigem <em>Access-Tokens</em> kommen kann.</p>
</div>
</div>
<div class="sect4">
<h5 id="absicherung-task"><a class="anchor" href="#absicherung-task"></a>3.3.3.2. Absicherung von Aufgaben (Tasks)</h5>
<div class="paragraph">
<p>Die in diesem Kapitel beschriebene Absicherung von <em>Aufgaben</em> unterscheidet sich gegenüber eigenständigen <em>Batch</em>-Anwendungen dahingehend, dass <em>Aufgaben</em> als integrierter Anteil einer eigentlichen Anwendung definiert sind.
Sie besitzen in der Regel einen kleineren Umfang als <em>Batches</em> und werden nicht manuell von außen gesteuert.
Stattdessen werden sie durch die Anwendung selbst konfiguriert, zeitlich geplant und selbstständig ausgeführt.
Daher müssen <em>Aufgaben</em>, als Teil einer Komponente des Anwendungskerns, über andere Mechanismen abgesichert werden.</p>
</div>
<div class="paragraph">
<p>Mit Einführung des Bausteins <code>isy-security</code> werden auch für die Absicherung von <em>Aufgaben</em> beide <em>Credential</em>-Flows <a href="#client-credential-flow">Client-Credential Flow</a> und <a href="#resource-owner-password-credential-flow">Resource-Owner-Password-Credential Flow</a> unterstützt.
Das bedeutet, dass die für die <em>Aufgaben</em>-Authentifizierung verwendete Parametrisierung per Konfiguration in <em>isy_task</em> einerseits wie bisher als <em>NatürlicherNutzer</em> zu <code>Benutzer</code> und <code>Passwort</code> und neu als <em>TechnischerNutzer</em> (Client) zu <code>Client-ID</code> und <code>Client-Secret</code> aufgelöst werden kann.</p>
</div>
<div class="paragraph">
<p>Mit <code>IsyFact-3</code> soll bevorzugt der <a href="#client-credential-flow">Client-Credential Flow</a> und den Properties <code>Client-ID</code> und <code>Client-Secret</code> verwendet werden.</p>
</div>
<div class="paragraph">
<p>Zur Unterstützung einer weichen Migration wird mit <code>IsyFact-3</code> der <a href="#resource-owner-password-credential-flow">Resource-Owner-Password-Credential Flow</a> mit <code>Benutzer</code> und <code>Passwort</code> weiterhin möglich sein.</p>
</div>
<div class="paragraph">
<p>Für jede <em>Aufgabe</em> wird per <code>Task-ID</code> die Definition der Authentifizierungsdaten in der Betriebskonfiguration erstellt.
In Abbildung <a href="#image-sequenzdiagramm-absicherung-task">Absicherung von Aufgaben (Tasks)</a> wird der logische Ablauf zur Absicherung einer <em>Aufgabe</em> mit dem neuen Security-Baustein <code>isy-security</code> im Zusammenspiel mit der Bibliothek <code>isy-task</code> skizziert.</p>
</div>
<div id="image-sequenzdiagramm-absicherung-task" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/Sequenzdiagramm_AbsicherungTask.dn.svg" alt="Sequenzdiagramm AbsicherungTask.dn">
</div>
<div class="title">Abbildung 13. Absicherung von Aufgaben (Tasks)</div>
</div>
<div class="paragraph">
<p>Sobald eine Anwendungskomponente einen fachlichen Ablauf als abgekoppelten Hintergrundprozess und somit als <em>Aufgabe</em> ausführen möchte, startet diese eine Initialisierung der <em>Aufgabe</em> mit der <code>TaskID</code> als Parameter.
In <code>isy-task</code> wird die übergebene <code>TaskID</code> verwendet, um in der Betriebskonfiguration gemäß den <a href="../../isy-task/nutzungsvorgaben/master.html#konfigurationsschluessel" class="xref page">Task-Konfigurations-Konventionen</a> nach den entsprechenden Konfigurationswerten aufzulösen.</p>
</div>
<div class="paragraph">
<p>Der gestartete <em>Aufgaben</em>-Prozess von <code>isy-task</code> ermittelt dann anhand der übergebenen <code>TaskID</code> den <em>Credential-Flow</em>-Typ und entscheidet durch diese die entsprechende Authentifizierungsmethode in <code>isy-security</code> aufzurufen.</p>
</div>
<div class="paragraph">
<p>Der Baustein <code>isy-security</code> gibt die Authentifizierungsdaten an das IAM-System weiter und erhält von diesem bei erfolgreicher Authentifizierung ein gültiges <em>Access-Token</em> zurück.
Dieses erhaltene <em>Access-Token</em> wird interpretiert und zur weiteren Verwendung ein <code>SecurityContext</code> initialisiert und aufbereitet.
Der <em>Aufgaben</em>-Prozess erhält dann den initialisierten <code>SecurityContext</code> zurück.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="verarbeitung-asynchroner-anfragen"><a class="anchor" href="#verarbeitung-asynchroner-anfragen"></a>3.3.4. Verarbeitung asynchroner Anfragen</h4>

</div>
<div class="sect3">
<h4 id="autorization-grant"><a class="anchor" href="#autorization-grant"></a>3.3.5. Autorisierungsverfahren</h4>
<div class="paragraph">
<p>Mit SpringSecurity (OAuth2.0) werden die vier Berechtigungszuteilungsverfahren (Credential Flows) <em>Authorization-Code-Credentials</em>, <em>Implicit-Credentials</em>, <em>Resource-Owner-Password-Credentials</em> und <em>Client-Credentials</em> spezifiziert.
Innerhalb der IsyFact werden bei der Autorisierung von Anwendungsaufrufen (von intern oder extern) die beiden Verfahren <em>Resource-Owner-Password-Credential</em> und <em>Client-Credential</em> angewendet, da es sich hierbei ausschließlich um die Berechtigungszuteilung für <em>Confidential-Clients</em> dreht.</p>
</div>
<div class="sect4">
<h5 id="resource-owner-password-credential-flow"><a class="anchor" href="#resource-owner-password-credential-flow"></a>3.3.5.1. Resource-Owner-Password-Credential Flow</h5>
<div class="sidebarblock">
<div class="content">
<div class="title"><span class="icon"><i class="fa fa-ban"></i></span> Deprecation</div>
<div class="paragraph">
<p>Dieser Teil der Dokumentation ist veraltet und wird in einem zukünftigen Release entfernt.
Die Inhalte sollten zur Entwicklung neuer Anwendungen nicht mehr berücksichtigt werden.
Stattdessen wird empfohlen, <a href="#client-credential-flow">Client-Credential Flow</a> zu verwenden.</p>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><strong>Anmerkung zur Deprecation</strong></p>
</div>
<div class="paragraph">
<p>Dieser Flow soll gemäß OAuth2.0 Vorgaben nicht mehr verwendet werden und wird in zukünftigen Versionen aus dem OAuth-Standard entfernt.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Der <em>Resource-Owner-Password-Credential</em>-Flow, der als Authentifizierungsdaten die Attribute <code>Username</code> und <code>Passwort</code> verwendet, sollte nur eingesetzt werden, wenn die involvierte Client-Anwendung ein hohes Vertrauen zur Wahrung der Authentifizierungsdaten sicherstellt oder wenn keine andere Art der Berechtigungszuteilung verfügbar ist, da hierbei die Authentifizierungsdaten des Benutzers durch die Client-Anwendung gehen bzw. direkt in ihr gespeichert sind.
In IsyFact wird dieses Verfahren eingesetzt, um eine selbständig laufende Anwendung (z.B. Batch, Task) als technischen Benutzer zu authentifizieren, der mit seinen ihm zugeteilten Rollen im an das IAM-System angeschlossene Benutzerverzeichnis verwaltet wird.
So wird die Authentifizierung für einen techn. Benutzer über diesen Authorization-Flow abgebildet.</p>
</div>
<div id="image-resourceowner-password-credential-flow" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/Resource-Owner-Passwort-Credential-Flow.dn.svg" alt="Resource Owner Passwort Credential Flow.dn">
</div>
<div class="title">Abbildung 14. OAuth2.0 Resource-Owner-Password-Credential Flow</div>
</div>
<div class="paragraph">
<p>Im vorherigen Bild wird der logische Ablauf des <em>Resource-Owner-Password-Credential</em>-Flows dargestellt.
Hierbei wird die Konfiguration des techn. Benutzers als der <em>Resource-Owner</em> dargestellt.</p>
</div>
<div class="paragraph">
<p>Einem <em>Confidential Client</em> wird die Konfiguration (1.) eines techn. Benutzers mit den Authentifizierungsdaten <code>Username</code> und <code>Passwort</code> zugeordnet.
Dieser techn. Benutzer muss mit seinen Rollen im Benutzerverzeichnis vorhanden und gepflegt sein.
Zusätzlich verlangt der <em>Resource-Owner-Password-Credential</em>-Flow eine Authentifizierung des <em>Confidential Client</em> selbst.
Die dafür verwendeten Authentifizierungsdaten <code>Client-ID</code> und <code>Client-Secret</code> müssen vor der Nutzung für die Client-Anwendung definiert und mit dem IAM-System abgestimmt sein.</p>
</div>
<div class="paragraph">
<p>Die so konfigurierte (Confidential-Client)-Anwendung schickt (2.) dann im Access Token Request diese beiden Authentifizierungsdaten an den IAM-Service.
Im IAM erfolgt mit den so übergebenen Authentifizierungsdaten die Authentifizierung sowohl des <em>Confidential Client</em>, als auch des techn. Benutzers als <em>Resource-Owner</em>, die im Ergebnis ein gültiges Access-Token mit den Rollen des techn. Benutzers als Antwort (3.) zurückgeliefert.</p>
</div>
<div class="paragraph">
<p>Die Client-Anwendung kann dann, mit dem so erhaltenen Access-Token und in den Rollen des techn. Benutzers, ihre Fachanwendungen aufrufen.
Das Access-Token enthält alle notwendigen Daten, um zu verifizieren, ob die aufrufende Anwendung ordnungsgemäß authentifiziert und autorisiert ist.</p>
</div>
</div>
<div class="sect4">
<h5 id="client-credential-flow"><a class="anchor" href="#client-credential-flow"></a>3.3.5.2. Client-Credential Flow</h5>
<div class="paragraph">
<p>Der <em>Client-Credential</em>-Flow wird und darf nur zur Berechtigungszuteilung eingesetzt werden, wenn die Client-Anwendung selbst auch der Besitzer der Authentifizierungsdaten und damit als Confidential-Client-Anwendung eingestuft ist.
Dieser Credential-Flow ist nach SpringSecurity OAuth2.0 auch die einzige Möglichkeit einen technischen Nutzer (Client) zu authentifizieren.
Es erfolgt hierbei keine Interaktion durch einen Benutzer, der sein Passwort eingeben müsste, sondern die Schritte zur Authentifizierung und Autorisierung der Client-Anwendung laufen selbständig als Hintergrundprozess analog einer Batch-Anwendung ab.
Die dabei verwendeten Authentifizierungsdaten <code>Client-ID</code> und <code>Client-Secret</code> müssen vor der Nutzung für die Client-Anwendung definiert und mit dem IAM-System abgestimmt sein.
Die Verwaltung des Clients mit dem ihm zugeordneten Rollen erfolgt im IAM-System.</p>
</div>
<div id="image-clientcredential-flow" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/Client-Credential-Flow.dn.svg" alt="Client Credential Flow.dn">
</div>
<div class="title">Abbildung 15. OAuth2.0 Client-Credential Flow</div>
</div>
<div class="paragraph">
<p>Im vorherigen Bild wird der logische Ablauf des <em>Client-Credential</em>-Flows dargestellt.
Hierbei kann die Client-Anwendung nach einem Access-Token beim IAM anfragen (1.), indem sie dabei ihre eigenen Client-Authentifizierungsdaten oder anderweitig unterstützte Authentifizierungskriterien verwendet.
Die Authentifizierung mit diesen so übermittelten Authentifizierungsdaten erfolgt dann im IAM-Service.
Bei erfolgreicher Authentifizierung wird (2.) ein gültiges Access-Token mit den Rollen des Clients als Antwort zurückgeliefert.
Mit dem so erhaltenen Access-Token kann die Client-Anwendung dann ihre Fachanwendungen aufrufen.
Das Access-Token enthält alle notwendigen Daten, um zu verifizieren, ob die aufrufende Anwendung ordnungsgemäß authentifiziert und autorisiert ist.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="token"><a class="anchor" href="#token"></a>3.4. Access-Token</h3>
<div class="sect3">
<h4 id="inhalte-der-token"><a class="anchor" href="#inhalte-der-token"></a>3.4.1. Inhalte der Access-Token</h4>
<div class="paragraph">
<p>In IsyFact sind Access-Token vom Typ JSON Web Token (JWT), das heißt, sie sind konform zum JWT-Standard (<a href="../../../../glossary/latest/literaturextern/inhalt.html#litextern-rfc7519-json-web-token" class="xref page">JSON Web Token (JWT)</a>) und enthalten Informationen über den authentifizierten Nutzer in Form von 'Claims', die für die Autorisierung und Ausführung des angeforderten Service benötigt werden.
Diese werden bei Erzeugung des Access-Tokens durch das IAM-System hineingeschrieben und können von der Anwendung ausgelesen werden.</p>
</div>
<div class="paragraph">
<p>Das Minimum an Informationen, die ein JWT in IsyFact enthalten muss - zusätzlich zu den im JWT-Standard vorgeschriebenen, sind folgende:</p>
</div>
<table id="access-token-claims" class="tableblock frame-all grid-all stretch">
<caption class="title">Tabelle 1. Access-Token claims</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Information:</th>
<th class="tableblock halign-left valign-top">Claim Name:</th>
<th class="tableblock halign-left valign-top">Claim Type:</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kennung der durchführenden Behörde</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BHKNZ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non-namespaced custom claim</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interne Kennung des durchführenden Benutzers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">internekennung</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non-namespaced custom claim</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kennung des durchführenden Benutzers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">preferred_username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IANA Public Claim Name / OIDC Standard Claim</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name des durchführenden Sachbearbeiters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">family_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IANA Public Claim Name / OIDC Standard Claim</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rollen des durchführenden Benutzers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">roles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IANA Public Claim Name</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Refresh-Token sind für Anwendungen 'opaque Token'.
Sie bestehen aus Universally Unique Identifier (UUID), einer zufälligen und einzigartigen Zeichenkette.
Diese ist nur für den IAM-Service von Bedeutung.
Sie werden vom IAM-Service erzeugt und mit dem Access-Token an die Anwendung geschickt.
Diese speichert es und schickt es wieder an den IAM-Service, um ein neues Access-Token zu erhalten.</p>
</div>
</div>
<div class="sect3">
<h4 id="validierung-der-token"><a class="anchor" href="#validierung-der-token"></a>3.4.2. Validierung der Access-Token</h4>
<div class="paragraph">
<p>Wenn eine Ressource oder ein Service einer Anwendung angefragt wird, muss das Access-Token von der empfangenden Anwendung validiert werden.
Dazu sind folgende Validierungen verpflichtend:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Prüfung des Access-Tokens auf Echtheit/Authentizität</p>
</li>
<li>
<p>Prüfung des Access-Tokens auf Gültigkeit</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Prüfung des Access-Tokens auf Echtheit/Authentizität</strong></p>
</div>
<div class="paragraph">
<p>Die Prüfung auf Echtheit belegt, ob das Access-Token wirklich von dem bekannten IAM-Service der Anwendungslandschaft ausgestellt wurde und dass es nicht nachträglich verändert wurde.
IsyFact verwendet vom IAM-Service signierte JWT Access-Token, wie in <a href="../../../../glossary/latest/literaturextern/inhalt.html#litextern-self-encoded-access-token" class="xref page">OAuth: Self-Encoded Access Tokens</a> beschrieben.
Zur Prüfung der Echtheit muss die Signatur von dem IsyFact-Anwendungssystem verifiziert werden, wie in <a href="../../../../glossary/latest/literaturextern/inhalt.html#litextern-validating-jwt-access-tokens" class="xref page">RFC 9068: Validating JWT Access Tokens</a> beschrieben.</p>
</div>
<div class="paragraph">
<p><strong>Prüfung des Access-Tokens auf Gültigkeit</strong></p>
</div>
<div class="paragraph">
<p>Access-Token besitzen eine zeitlich begrenzte Gültigkeit, die im Ermessen der Anwendungslandschaft definiert werden kann.
Durch die begrenzte zeitliche Gültigkeit kann sichergestellt werden, dass das Access-Token kein 'ewiger Universalschlüssel' ist, sondern regelmäßig erneuert werden muss.
Die Prüfung auf Gültigkeit gibt an, ob der Ablaufzeitpunkt des Access-Tokens bereits erreicht wurde.
Für ein gültiges Access-Token muss der im Header-Claim 'exp' enthaltene Zeitstempel in der Zukunft liegen.</p>
</div>
<div class="paragraph">
<p><strong>Reaktion auf ein invalides Access-Token</strong></p>
</div>
<div class="paragraph">
<p>Wenn eine der oben beschriebenen Prüfungen fehlschlägt, ist das Access-Token invalide und die Anfrage muss abgelehnt werden.
Als Antwort wird der HTTP status error code: 401 (Unauthorized) gesendet mit dem WWW-Authenticate header: Bearer error="invalid_token" u. error_description= &lt;Fehlerbeschreibung&gt; z.B. "The access token expired".</p>
</div>
<div class="paragraph">
<p><strong>Beide Prüfungen werden durch den Baustein <code>isy-security</code> bzw. durch das <code>Spring Security Framework</code> implementiert.</strong></p>
</div>
<div class="paragraph">
<p>Bei einem höheren Sicherheitsbedarf können weitere Informationen (Registered Claims) im Token mitgeliefert und validiert werden.
Falls gefordert ist, auch vorzeitig abgelaufene Access-Token (z.B. durch globales Logout des Benutzers oder Rücknahme (Revoke) der Legitimation des Benutzers) zu erkennen und zu sperren, kann das IsyFact-Anwendungssystem das Access-Token zur Prüfung an den IAM-Service schicken, wie in <a href="../../../../glossary/latest/literaturextern/inhalt.html#litextern-token-introspection" class="xref page">RFC 7662: OAuth 2.0 Token Introspection</a> beschrieben.</p>
</div>
<div class="paragraph">
<p>Um auf eine geschützte Ressource eines anderen Anwendungssystems (Ressourcen-Server) zugreifen zu können, muss die Anwendung in der Anfrage (Request) das Access-Token mitgeben.
Dazu wird es aus dem <code>SecurityContext</code> gelesen und - Base64-codiert, wie erhalten - mit in den Header des HTTP-Requests gesetzt.
Genauer gesagt, in das "Authorization" Request-header Feld und mit dem "Bearer" Authentifizierungs-Schema (Authorization: Bearer &lt;accessTokenStringBase64&gt; - Siehe auch:
<a href="../../../../glossary/latest/literaturextern/inhalt.html#litextern-authorization-bearer-token" class="xref page">RFC 6750 Authorization Bearer Token</a>).</p>
</div>
<div class="paragraph">
<p>Der Ressourcen-Server liest das Access-Token aus dem Request-Header und gibt - nach Validierung des Access-Tokens und Prüfung des Inhalts (Ablaufdatum, Rechte aus Rollen) - die angeforderte Ressource frei.</p>
</div>
</div>
<div class="sect3">
<h4 id="aktualisierung-der-token"><a class="anchor" href="#aktualisierung-der-token"></a>3.4.3. Aktualisierung der Access-Token</h4>
<div class="paragraph">
<p>Ein Access-Token muss eine begrenzte Gültigkeitsdauer besitzen, um den Zugriff auf geschützte Ressourcen zeitlich zu beschränken.
Sobald die Gültigkeitsdauer überschritten ist, muss das Access-Token als ungültig erkannt werden (siehe <a href="#validierung-der-token">Validierung der Access-Token</a>).
Die Verwendung eines abgelaufenen Access-Tokens bei einer Anfrage muss vom empfangenden System erkannt und mit HTTP status error code: 401 und der Fehlerbeschreibung: "The access token expired" beantwortet werden, wie oben beschrieben.
Der Aufrufer muss die Antwort verarbeiten und die Anfrage mit einem gültigen Access-Token erneut senden.</p>
</div>
<div class="paragraph">
<p>Für menschliche Nutzer wurde mit dem Refresh-Token ein Mechanismus eingeführt, der eine automatische Aktualisierung des Access-Tokens erlaubt, ohne dass der Benutzer interagieren muss:
Das Webserver-Modul <code>mod_auth_openidc</code> koordiniert für Portal-Anwendungen die Erneuerung des Access-Tokens (automatisch mit Refresh-Token bzw. durch erneute Authentifizierung (siehe: <a href="#aufruf-weboberflaeche-portal">Aufruf Web-Oberfläche/Portal</a>)) - der Baustein Security wird hierfür nicht verwendet.<br></p>
</div>
<div class="paragraph">
<p>Technische Nutzer (Clients) können ihr Access-Token nur durch eine erneute Authentifizierung (siehe: <a href="#aufruf-service-gateway">Aufruf Service-Gateway</a> bzw. <a href="#ausfuehrung-batch-u-task">Ausführung Batch &amp; Task</a>) erneuern.</p>
</div>
<div class="paragraph">
<p><strong>Konfiguration des Refresh-Tokens im IAM-System</strong></p>
</div>
<div class="paragraph">
<p>Zur weiteren Erhöhung der Sicherheit kann und sollte das Refresh-Token mit Rotation konfiguriert werden, denn dann wird bei Aktualisierung des Access Token auch ein neues Refresh-Token ausgestellt.
Eine eventuelle nochmalige Einreichung desselben Refresh-Token bedeutet, dass sich unbefugte Dritte dieses Refresh-Token aneignen konnten.
Das wird durch die 'Automatic Reuse Detection' im IAM-System erkannt und Gegenmaßnahmen ergriffen.</p>
</div>
<div class="paragraph">
<p>Die Ablaufzeit des Refresh-Token bestimmt, wie lange der Benutzer an der Anwendung angemeldet ist und mit ihr arbeiten kann, ohne sich neu authentifizieren zu müssen.
Hierbei muss Sicherheit gegen Benutzerkomfort abgewogen werden.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="nutzung-des-behoerdenkennzeichens"><a class="anchor" href="#nutzung-des-behoerdenkennzeichens"></a>3.5. Nutzung des Behördenkennzeichens</h3>
<div class="paragraph">
<p>Als optional mögliche 2-Faktor-Authentifizierung ist im IAM-Service die Übermittlung und Auswertung des Behördenkennzeichens (BHKNZ) vorgesehen.
Die Implementierung des IAM-Service muss für die 2-Faktor-Authentifizierung dieses Feature unterstützen, andernfalls wird das BHKNZ als optionales Attribut betrachtet.
Wenn die IAM-Service-Implementierung dieses Feature unterstützt, dann wird ein mit den Authentifizierungsdaten gemeinsam übergebenes Behördenkennzeichen gegen das Behördenkennzeichen aus dem zu authentifizierenden Nutzerprofil geprüft.</p>
</div>
<div class="paragraph">
<p>Wie in <a href="master.html#aussensicht-der-komponente-security" class="xref page">Schnittstelle des Bausteins Security</a> beschrieben, wird bei den Authentifizierungsmethoden <code>authentifiziereClient()</code> und <code>authentifiziereSystem()</code> das Behördenkennzeichen als optionaler Parameter an den <code>Authentifizierungsmanager</code> übergeben, der es mit den anderen Authentifizierungsdaten zusammen an den IAM-Service weiterleitet.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rollen-und-rechte"><a class="anchor" href="#rollen-und-rechte"></a>4. Rollen &amp; Rechte</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Die Vergabe von Rollen ist <em>das</em> Mittel der Benutzeradministration, um Anwender der <a href="../../../../glossary/latest/glossary/master.html#glossar-anwendungslandschaft" class="xref page">Anwendungslandschaft</a> mit Berechtigungen auszustatten.
Die Vergabe von Rollen an einen Anwender (menschlicher und technischer) erfolgt im Querschnitt:
in der Querschnittsanwendung Benutzerverzeichnis.</p>
</div>
<div class="paragraph">
<p>Es ist konzeptionell beabsichtigt, dass die Administration per Rollen recht grobgranular erfolgt.
Eine administrative Vergabe feingranularer Rechte ist konzeptionell nicht erwünscht.
Die individuelle Zuordnung von Rechten zu Anwendern ist daher prinzipiell nicht möglich.
Rechte werden Anwendern ausschließlich indirekt über Rollen zugeordnet.
Welche Rechte einer Rolle zugeordnet sind, wird innerhalb der statischen Konfiguration eines IT-Systems definiert und ist damit Teil der Software.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Die Geschäftsanwendung X bietet zwei Dialoge zur Administration von Anwendungseigenschaften.
Die Dialoge sind über die Rolle <code>AnwendungX_Administrator</code> abgesichert.
Innerhalb der Anwendung ist Dialog 1 mit dem Recht <code>AdministrierenDialog1</code> und Dialog 2 mit dem Recht <code>AdministrierenDialog2</code> abgesichert.
Grobgranular wird die Rolle <code>AnwendungX_Administrator</code> einem Anwender zugeordnet.
Innerhalb der Konfiguration des IT-Systems X sind beide Rechte konfiguriert und der Rolle <code>AnwendungX_Administrator</code> zugeordnet.
Alle Anwender mit der Rolle <code>AnwendungX_Administrator</code> sind somit innerhalb der Anwendung autorisiert, die beiden Admin-Dialoge zu verwenden.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Der Vorteil an diesem Vorgehen ist, dass Änderungen an der Zuordnung von Anwendern zu Rollen oder von Rollen zu Rechten nur zu lokalen Änderungen führen.
Soll eine Rolle andere Rechte in einer Geschäftsanwendung bekommen (z.B. durch das Hinzufügen neuer Dialoge), so kann dies für die Benutzeradministration transparent geschehen.
Ebenso sind Änderungen an Anwendern oder ihren zugehörigen Rollen transparent für einzelne Geschäftsanwendungen.</p>
</div>
<div class="sect2">
<h3 id="spezifikation-der-rollen"><a class="anchor" href="#spezifikation-der-rollen"></a>4.1. Spezifikation der Rollen</h3>
<div class="paragraph">
<p>Rollen werden bereits auf fachlicher Ebene als Teil der Systemspezifikation einer Geschäftsanwendung spezifiziert.
Dazu werden zunächst in geeigneter Granularität Rechte definiert, die zur Benutzung bestimmter Funktionalität der Geschäftsanwendung berechtigen.
Diese Rechte werden fachlichen Rollen zugeordnet, die dann wiederum den Anwendern der Anwendung zugeordnet werden können.
Die fachlichen Rollen ermöglichen in der Regel pauschal den Zugriff auf die Geschäftsanwendung oder, im Sinne der Rolle eines fachlichen Sachbearbeiters, die Nutzung ausgewählter Anwendungsfälle.</p>
</div>
</div>
<div class="sect2">
<h3 id="struktur-einer-rolle"><a class="anchor" href="#struktur-einer-rolle"></a>4.2. Struktur einer Rolle</h3>
<div class="paragraph">
<p>Alle Rollen besitzen die folgende Struktur:</p>
</div>
<div class="paragraph">
<p><strong>Name:</strong> Interner Name der Rolle, wie er für die Autorisierung und innerhalb von Anwendungen zur Überprüfung bereitgestellt wird.</p>
</div>
<div class="paragraph">
<p><strong>Label:</strong> Name der Rolle, wie sie in der Oberfläche der Benutzeradministration angezeigt wird.
In der Regel ist dieser Name identisch mit dem technischen Namen der Rolle.
Eine Abweichung ist nur dann sinnvoll, wenn die Vergabe der Rollen durch den Administrator dadurch intuitiver wird.</p>
</div>
<div class="paragraph">
<p><strong>Beschreibung:</strong> Eine kurze Beschreibung der Rolle in einer fachlichen Sprache, die für die Benutzeradministration verständlich ist.</p>
</div>
<div class="paragraph">
<p><strong>Typ:</strong> Eine Rolle kann fachlich oder technisch sein.
Nur fachliche Rollen können über die Benutzeradministration verwaltet werden.
Technische Rollen können fachlichen Rollen allerdings untergeordnet werden (siehe weiter unten: <strong>Untergeordnete Rollen</strong>).</p>
</div>
<div class="paragraph">
<p><strong>Enthaltene Rechte:</strong> Die Ausstattung einer fachlichen Rolle mit Rechten beschreibt den Funktionsumfang, den diese Rolle bei Nutzung der Geschäftsanwendung ermöglicht.</p>
</div>
<div class="paragraph">
<p><strong>Untergeordnete Rollen:</strong> Optional können fachliche Rollen untergeordnete technische Rollen besitzen.
Dies ist z.B. immer dann notwendig, wenn ein Anwendungsfall die Services eines Nachbarsystems verwendet.
Somit muss im Rahmen des Anwendungsfalls die Service-Schnittstelle des Nachbarsystems aufgerufen werden.
Die dazu benötigte, technische Rolle muss der fachlichen Rolle untergeordnet werden, damit dies funktioniert.</p>
</div>
<div class="paragraph">
<p><strong>Sichtbarkeit der Rolle:</strong> Die Sichtbarkeit der Rollen bei der Zuordnung an Anwender, externe Systeme und interne Systeme kann eingeschränkt werden, um die Administration zu vereinfachen.</p>
</div>
<div class="paragraph">
<p>Die meisten Rollen sind fachlicher Natur.
Technische Rollen treten oft im Rahmen von Service-Schnittstellen auf.
Bietet eine Geschäftsanwendung Funktionalität über Service-Schnittstellen an, so ist die Nutzung jeder Service-Schnittstelle zumindest durch eine technische Rolle abzusichern.
Diese Rollen werden nicht direkt an Anwender vergeben, sondern fachlichen Rollen anderer Geschäftsanwendungen untergeordnet.</p>
</div>
<div class="paragraph">
<p>Wenn die Anwendung fachliche oder technische Batches enthält, dann müssen für diese Batches in der Spezifikation entsprechende „interne Systeme“ definiert werden.
Die Systemnamen sollten dem folgenden Schema entsprechen: <code>&lt;Anwendungskürzel&gt;_BAT_&lt;Batchname&gt;</code>.
Für jedes dieser internen Systeme müssen eigene fachliche Rollen definiert werden.</p>
</div>
</div>
<div class="sect2">
<h3 id="richtlinien-zum-schnitt-der-rollen"><a class="anchor" href="#richtlinien-zum-schnitt-der-rollen"></a>4.3. Richtlinien zum Schnitt der Rollen</h3>
<div class="paragraph">
<p>Zum Schnitt von fachlichen und technischen Rollen gibt es Erfahrungswerte, welche das restliche Kapitel detailliert.
Wichtig ist vor allem die Beziehung zwischen fachlichen und technischen Rollen.
Des Weiteren sollte die Menge der Rollen so klein wie möglich gehalten werden.</p>
</div>
<div class="paragraph">
<p>Die Abbildung <a href="#image-rollen-beziehungen">Abbildung 16</a> verdeutlicht den Inhalt der folgenden Abschnitte grafisch.</p>
</div>
<div id="image-rollen-beziehungen" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/rollen-beziehungen.png" alt="rollen beziehungen" width="70%">
</div>
<div class="title">Abbildung 16. Beziehungen zwischen fachlichen und technischen Rollen</div>
</div>
<div class="sect3">
<h4 id="technische-rollen"><a class="anchor" href="#technische-rollen"></a>4.3.1. Technische Rollen</h4>
<div class="paragraph">
<p>Technische Rollen sichern die Kommunikationswege innerhalb der Anwendungslandschaft ab.
Sie werden für die Schnittstellen von Geschäftsanwendungen verwendet, welche nur von anderen Geschäftsanwendungen aufgerufen werden.</p>
</div>
<div class="paragraph">
<p>Technische Rollen berechtigen zur Ausführung der entsprechenden Services der Geschäftsanwendung selbst, sowie aller dadurch mittelbar ausgelösten Aktionen in nachgelagerten Anwendungen.
Daher werden diesen technischen Rollen im Regelfall weitere technische Rollen untergeordnet sein, welche die nachgelagerten Anwendungen absichern.</p>
</div>
</div>
<div class="sect3">
<h4 id="technische-zugangsrollen"><a class="anchor" href="#technische-zugangsrollen"></a>4.3.2. Technische Zugangsrollen</h4>
<div class="paragraph">
<p>Anwender gelangen in der Regel entweder über das <a href="../../../../glossary/latest/glossary/master.html#glossar-portal" class="xref page">Portal</a> oder den <a href="../../../../glossary/latest/glossary/master.html#glossar-service-gateway" class="xref page">Service-Gateway</a> in eine Anwendungslandschaft.
Um den Zugriff über diese Schnittstellen zentral und einfach zu verwalten, können dafür entsprechende technische Rollen definiert werden (z.B. <code>Zugang_Portal</code> und <code>Zugang_Service_Gateway</code>).
Diese Rollen können dann einfach fachlichen Rollen untergeordnet werden, um den jeweiligen Zugriff zu erlauben.</p>
</div>
</div>
<div class="sect3">
<h4 id="technische-querschnitts-rolle"><a class="anchor" href="#technische-querschnitts-rolle"></a>4.3.3. Technische Querschnitts-Rolle</h4>
<div class="paragraph">
<p>Für <a href="../../../../glossary/latest/glossary/master.html#glossar-service-fachlich" class="xref page">Services</a> des Querschnitts, die nahezu alle Aufrufe benötigen und die keine sicherheitskritischen Operationen anbieten, kann eine zentrale Rolle (z.B. <code>Querschnitt_Nutzer</code>) angelegt werden.
Diese Rolle berechtigt zur Durchführung von unkritischen Operationen im Querschnitt, wie beispielsweise dem Auslesen von Schlüsselwerten.</p>
</div>
<div class="paragraph">
<p>Wenn die Querschnitts-Rolle den Zugangsrollen untergeordnet ist, darf jeder Anwender mit Zugriff automatisch auch auf den Querschnitt zugreifen.
Dies reduziert die Anzahl der Rollen, die einem Nutzer zugewiesen sind, in der Regel deutlich.</p>
</div>
</div>
<div class="sect3">
<h4 id="fachliche-rollen"><a class="anchor" href="#fachliche-rollen"></a>4.3.4. Fachliche Rollen</h4>
<div class="paragraph">
<p>Fachliche Rollen werden für Schnittstellen von Geschäftsanwendungen vergeben, welche Zugänge zur Anwendungslandschaft geben.
Dies beinhaltet neben den Dialogen (der grafischen Oberfläche) und Zugängen über das Service-Gateway auch interne Systeme wie beispielsweise Systemtasks oder Batches.</p>
</div>
<div class="paragraph">
<p>Fachliche Rollen berechtigen zur Ausführung der entsprechenden Aktion über den entsprechenden Zugangsweg, sowie aller dadurch mittelbar ausgelösten Aktionen in nachgelagerten Anwendungen.
Daher werden diesen fachlichen Rollen im Regelfall weitere technische Rollen untergeordnet sein, welche die nachgelagerten Anwendungen absichern.</p>
</div>
<div class="paragraph">
<p>Fachliche Rollen können über die Benutzeradministration verwaltet und Anwendern bzw. Systemen zugeordnet werden.
Hierbei ist darauf zu achten, dass die Labels der Rollen sinnvoll genutzt werden.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="richtlinien-zur-benennung-der-rollen"><a class="anchor" href="#richtlinien-zur-benennung-der-rollen"></a>4.4. Richtlinien zur Benennung der Rollen</h3>
<div class="paragraph">
<p>Die Benennung von Rollen muss fachlich getrieben sein.
Das bedeutet vor allem, dass Rollen für eine fachliche Operation, d.h. den Akteur, angelegt werden.
Grundsätzlich gilt, dass die Namen der Rollen ausgeschrieben werden, sofern sie nicht zu lang werden.
Ist dies der Fall, sollte der Namen abgekürzt und ein sprechendes Label für die Administration der Rollen vergeben werden.</p>
</div>
<div class="sect3">
<h4 id="fachliche-rollen-schema"><a class="anchor" href="#fachliche-rollen-schema"></a>4.4.1. Fachliche Rollen</h4>
<div class="paragraph">
<p>Das Schema zur Benennung einer fachlichen Rolle für Anwender kann folgendermaßen aussehen:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;Fachlicher Systemname&gt;_&lt;Funktion&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Der fachliche Systemname beschreibt die Geschäftsanwendung, bzw. die Anwendungsdomäne, in welcher die entsprechende Funktionalität bereitgestellt wird.
Er entspricht prinzipiell dem Systemnamen der Systemspezifikation, abzüglich technischer Kürzel.</p>
</div>
<div class="paragraph">
<p>Da die Rollen für fachliche Operationen angelegt werden, sollten sie unabhängig von technischen Aspekten gelten.
So kann beispielsweise die Rolle unabhängig davon gelten, ob die Auskunft über ein Service-Gateway oder das Portal durchgeführt wird.
Dies kann durch die Verwendung spezieller technischer Rollen (s. <a href="master.html#technische-zugangsrollen" class="xref page">Technische Zugangsrollen</a>) erreicht werden.</p>
</div>
<div class="paragraph">
<p><a href="../../../../glossary/latest/glossary/master.html#glossar-it-system" class="xref page">IT-Systeme</a> werden intern in Form von Batches oder Timer-Tasks aktiv.
Auch hier findet ein Zugang zur Anwendungslandschaft statt.
Das Schema zur Benennung einer fachlichen Rolle für IT-Systeme kann folgendermaßen aussehen:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;Fachlicher Systemname&gt;_SYSTEM_&lt;Suffix&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Im Regelfall gibt es nur eine fachliche Rolle pro IT-System, die alle Batches und Tasks absichert.</p>
</div>
<div class="paragraph">
<p>Gibt es beispielsweise mehrere Batches in einer Anwendung, so sollten die einzelnen Batches mit verschiedenen Rechten abgesichert werden, die alle derselben Rolle zugeordnet sind.
Falls mehrere differenzierte, fachliche Rollen erforderlich sind, werden die Rollen um ein entsprechendes Suffix ergänzt.
Dies kann der Fall sein, wenn es fachlich unterschiedliche Nutzer von Tasks und Batches gibt.
Zusätzlich dazu kann es erforderlich sein, einen (technischen) Anwender anzulegen, welchem die entsprechenden Rollen zugeordnet werden.</p>
</div>
</div>
<div class="sect3">
<h4 id="technische-rollen-schema"><a class="anchor" href="#technische-rollen-schema"></a>4.4.2. Technische Rollen</h4>
<div class="paragraph">
<p>Das Schema zur Benennung einer technischen Rolle kann folgendermaßen aussehen:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;Technischer Systemname&gt;_&lt;Servicename&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Die Namen technischer Rollen enthalten keine festen Bestandteile wie z.B. <code>SYSTEM</code>, da es sich immer um Services handelt.
Der Servicename muss eindeutig und sprechend sein; vor allem, wenn mehrere Services mit derselben Rolle gemeinsam abgesichert werden.
Da die Rollen nur innerhalb der Anwendungslandschaft zum Einsatz kommen und nicht administriert werden müssen, wird der technische Systemname verwendet.
Auch hier sollte auf die Länge des Namens geachtet werden und im entsprechenden Fall, wie bei fachlichen Rollen, eine Abkürzung des Namens mit sprechendem Label vorgenommen werden.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="entwurf-von-rollen"><a class="anchor" href="#entwurf-von-rollen"></a>4.5. Entwurf von Rollen</h3>
<div class="paragraph">
<p>Wird ein neues IT-System entwickelt, sind die oben genannten Richtlinien zum Schnitt und zur Benennung der Rollen stärkstens empfohlen.
Hierfür ist eine enge Abstimmung mit der Benutzeradministration und den jeweiligen fachlichen Ansprechpartnern erforderlich.
Alle Parteien verfügen über unterschiedliches, sich ergänzendes Fachwissen, das essenziell für die Erstellung von Rollen ist.</p>
</div>
<div class="paragraph">
<p>Prinzipiell sollten so wenig Rollen wie möglich und so viele wie nötig vergeben werden.
Der folgende Prozess bietet eine grobe Richtlinie:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Jede Schnittstelle wird mit einem Recht abgesichert.</p>
</li>
<li>
<p>In Abstimmung mit den fachlichen Ansprechpartnern und der Benutzeradministration werden diese Rechte zu technischen bzw. fachlichen Rollen zusammengefasst.</p>
</li>
</ol>
</div>
<div id="image-rollen-erstellung" class="imageblock text-center">
<div class="content">
<img src="../_images/konzept/rollen-erstellung.png" alt="rollen erstellung" width="70%]">
</div>
<div class="title">Abbildung 17. Absicherung durch Rechte und Aggregation in Rollen</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>In Abstimmung mit den fachlichen Ansprechpartnern und der Benutzeradministration wird ermittelt, ob und welche zusätzlichen technischen Anwender benötigt werden.</p>
</li>
<li>
<p>Vorbereitung der Einspielung der neuen, fachlichen Rollen in die Benutzeradministration.
Über das jeweilige Format bestimmt der IsyFact-Baustein, der zur Benutzeradministration eingesetzt wird.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Die Rollen und Rechte sollten bereits während der Erstellung des Systementwurfs entworfen werden, soweit dies möglich ist.
Sobald die angebotenen Schnittstellen bekannt sind, können die entsprechenden Rollen nach obigen Richtlinien erstellt werden.
Die zugehörigen untergeordneten Rollen lassen sich durch die aufgerufenen Nachbarsystemschnittstellen ermitteln.</p>
</div>
</div>
<div class="sect2">
<h3 id="tests-und-inbetriebnahmen"><a class="anchor" href="#tests-und-inbetriebnahmen"></a>4.6. Tests und Inbetriebnahmen</h3>
<div class="paragraph">
<p>Eine wesentliche Einschränkung der bisherigen Modellierung findet sich bei Tests und Inbetriebnahmen.
Es gestaltet sich bislang schwer, dass vor der eigentlichen Inbetriebnahme nur eine kleine Menge von Anwendern auf eine neue Geschäftsanwendung zugreifen kann.
So werden oft, auch bei der Ablösung einer Geschäftsanwendung durch eine neue Umsetzung, komplett neue Rollen für die neue Geschäftsanwendung vergeben, um die Absicherung beider Geschäftsanwendungen zu gewährleisten.
Dies führt oft zu aufwendigen Migrationen und zu einer stark ansteigenden Menge von Rollen.</p>
</div>
<div class="paragraph">
<p>Um dies zu vermeiden, kann eine neue fachliche Rolle für eine Art Testmodus eingeführt:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Tester_&lt;Vorhaben&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Geschäftsanwendungen, die bestehende Geschäftsanwendungen ablösen oder vor der offiziellen Inbetriebnahme einer kleinen Menge von Anwendern zur Verfügung stehen, müssen in ihrer betrieblichen Konfiguration einen Schalter besitzen, der einen Testmodus aktiviert.
Ist der Schalter (und damit der Testmodus) aktiv, wird zusätzlich zur üblichen Autorisierung auf die zusätzliche, fachliche Rolle geprüft.
Somit ist sichergestellt, dass beim Ablösen von alten Geschäftsanwendungen auch die neue Geschäftsanwendung mit denselben Rollen abgesichert und (falls nötig) parallel betrieben werden kann.
Genauso funktioniert auch das Freischalten einer neuen Geschäftsanwendung für einen zunächst kleinen Kreis von Anwendern.
In beiden Fällen muss zur eigentlichen Inbetriebnahme, anstatt einer aufwändigen Migration, nur ein Schalter in der betrieblichen Konfiguration umgelegt werden.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<div class="divFooter"></div>

<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/isyfact.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
  </body>
</html>
