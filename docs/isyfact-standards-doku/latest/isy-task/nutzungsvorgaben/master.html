<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nutzungsvorgaben Task Scheduling :: IsyFact Dokumentation</title>
    <link rel="canonical" href="https://isyfact.github.io/isyfact-standards-doku/latest/isy-task/nutzungsvorgaben/master.html">
    <meta name="generator" content="Antora 3.0.1">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../_/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../../../_/css/isyfact.css">
    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://isyfact.github.io">IsyFact Dokumentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="isyfact-standards-doku" data-version="2.5.0-SNAPSHOT">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../einstieg/einstieg.html">IsyFact Standards</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../einstieg/einstieg.html">Einstieg</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../einstieg/vorstellung.html">Vorstellung der IsyFact</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../einstieg/vorstellung/isyfact-standards.html">IsyFact-Standards</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../einstieg/vorstellung/isyfact-erweiterungen.html">IsyFact-Erweiterungen</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../einstieg/vorstellung/rahmenbedingungen.html">Rahmenbedingungen</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../einstieg/erste-schritte.html">Erste Schritte</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../einstieg/produkte.html">Eingesetzte Produkte</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../einstieg/tutorial/master.html">Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../einstieg/whitepaper.html">Whitepaper</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../einstieg/migrationsleitfaden-if2/master.html">Migrationsleitfaden IsyFact 2</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../blaupausen/blaupausen.html">Blaupausen</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../blaupausen/referenzarchitektur/master.html">Referenzarchitektur</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../blaupausen/referenzarchitektur-it-system/master.html">Referenzarchitektur IT-System</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-anwendungskern/master.html">Anwendungskern</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-datenzugriff/master.html">Datenzugriff</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-service/master.html">Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-web-gui/master.html">Web GUI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../blaupausen/detailkonzept-komponente-batch/master.html">Batch</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../bausteine/bausteine.html">Bausteine</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Datum &amp; Zeit</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-datetime/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-datetime/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Fehlerbehandlung</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-exception-core/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-exception-core/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">HttpInvoker</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-serviceapi-core/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-serviceapi-core/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Konfiguration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-konfiguration/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-konfiguration/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Logging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-logging/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-logging/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Polling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-polling/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-polling/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">REST</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-service-rest/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-service-rest/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Sicherheit</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-sicherheit/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-sicherheit/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Sonderzeichen</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-sonderzeichen/konzept/sonderzeichen.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-sonderzeichen/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Task Scheduling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Überwachung</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-ueberwachung/konzept/master.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-ueberwachung/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Util</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../isy-util/nutzungsvorgaben/master.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Styleguide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../isyfact-style-doku/latest/isy-style/styleguide.html">Styleguide</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../isyfact-style-doku/latest/isy-style/nutzungsvorgaben/nutzungsvorgaben.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">JSF</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../isyfact-jsf-doku/latest/isy-web/konzept/konzept.html">Konzept</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../isyfact-jsf-doku/latest/isy-web/nutzungsvorgaben/nutzungsvorgaben.html">Nutzungsvorgaben</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../plattform/plattform.html">Plattform</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../methodik/methodik.html">Methodik</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../methodik/namenskonventionen/master.html">Namenskonventionen</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../methodik/versionierung/master.html">Versionierung</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../methodik/java-programmierkonventionen/master.html">Java-Programmierkonventionen</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../methodik/diagrammerstellung.html">Diagrammerstellung und Modellierung</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../methodik/diagrammerstellung/diagramsnet.html">diagrams.net</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../methodik/diagrammerstellung/enterprise-architect.html">Enterprise Architect</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../methodik/vorlagen.html">Vorlagen</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../methodik/vorlagen/bearbeitung.html">Bearbeitung der AsciiDoc-Vorlagen</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../werkzeuge/werkzeuge.html">Werkzeuge</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../werkzeuge/dokumentation/einleitung/einfuehrung.html">Dokumentation gemäß IsyFact</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Antora (empfohlen)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../werkzeuge/dokumentation/erstellung/erstellung-antora.html">Seiten anlegen</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../werkzeuge/seitenvorlage.html">Seitenvorlage</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../werkzeuge/kopiervorlage.html">Kopiervorlage für neue Seiten</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../werkzeuge/dokumentation/bearbeitung/bearbeitung-antora.html">Seiten bearbeiten</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../werkzeuge/dokumentation/generierung/generierung-antora.html">Projektseite erzeugen</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">AsciidoctorJ</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../werkzeuge/dokumentation/erstellung/erstellung-asciidoctorj.html">Neue Dokumente anlegen</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../werkzeuge/dokumentation/bearbeitung/bearbeitung-asciidoctorj.html">Dokumente bearbeiten</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../werkzeuge/dokumentation/generierung/generierung-asciidoctorj.html">PDF- und HTML-Dokumente erzeugen</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../werkzeuge/dokumentation/changelog/changelog-doku.html">Zentralisiertes und automatisiertes Changelog</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../werkzeuge/entwicklungsumgebung/master.html">Entwicklungsumgebung</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../werkzeuge/versionierungskontrolle/master.html">Versionierungskontrolle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../werkzeuge/gui-tests/gui-tests-mit-selenium.html">GUI-Tests mit Selenium</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../changelog/changelog.html">Changelog</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">IsyFact Standards</span>
    <span class="version">2.5 (DEV)</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../glossary/latest/glossary/master.html">Glossar</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../glossary/latest/glossary/master.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../einstieg/einstieg.html">IsyFact Standards</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../einstieg/einstieg.html">2.5 (DEV)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../isyfact-jsf-doku/latest/isy-web/konzept/konzept.html">JavaServer Faces (JSF)</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../isyfact-jsf-doku/latest/isy-web/konzept/konzept.html">5.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../isyfact-style-doku/latest/isy-style/styleguide.html">Styleguide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../isyfact-style-doku/latest/isy-style/styleguide.html">5.4</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../einstieg/vorstellung.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../einstieg/einstieg.html">IsyFact Standards</a></li>
    <li><a href="../../bausteine/bausteine.html">Bausteine</a></li>
    <li>Task Scheduling</li>
    <li><a href="master.html">Nutzungsvorgaben</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Inhalt" data-levels="3">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Nutzungsvorgaben Task Scheduling</h1>
<div id="preamble">
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><span class="image left"><img src="../../../../glossary/latest/licence/_images/IFS-Logo.png" alt="IFS-Logo" width="150"></span> Diese Seite ist ein Teil der IsyFact-Standards.
Alle Inhalte der Seite, insbesondere Texte und Grafiken, sind urheberrechtlich geschützt.
Alle urheberrechtlichen Nutzungs- und Verwertungsrechte liegen beim Bundesverwaltungsamt.</p>
</div>
<div class="paragraph">
<p><span class="image right"><img src="../../../../glossary/latest/licence/_images/CC-BY.png" alt="Creative Commons Namensnennung" width="150"></span>
Die Nutzung ist unter den <a href="../../../../glossary/latest/literaturextern/inhalt.html#litextern-cc-licence" class="xref page">Lizenzbedingungen</a> der <a href="../../../../glossary/latest/literaturextern/inhalt.html#litextern-cc-short" class="xref page">Creative Commons Namensnennung 4.0 International</a> gestattet.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="einleitung"><a class="anchor" href="#einleitung"></a>1. Einleitung</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dieses Dokument beschreibt alle Aspekte, die bei der Verwendung der <code>isy-task</code> <a href="../../../../glossary/latest/glossary/master.html#glossar-bibliothek" class="xref page">Bibliothek</a> zu berücksichtigen sind.</p>
</div>
<div class="paragraph">
<p>Die <code>isy-task</code> Bibliothek wurde im Dokument <a href="../konzept/master.html#einleitung" class="xref page">Task Scheduling - Konzept</a>  konzipiert.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="aufbau-und-zweck-des-dokuments"><a class="anchor" href="#aufbau-und-zweck-des-dokuments"></a>2. Aufbau und Zweck des Dokuments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Die <code>isy-task</code> Bibliothek wird im Rahmen der IsyFact Software Factory zur automatisierten Ausführung von wiederkehrenden Aufgaben innerhalb von fachlichen <a href="../../../../glossary/latest/glossary/master.html#glossar-anwendungskomponente" class="xref page">Anwendungskomponenten</a> eingesetzt.
Der Zweck dieses Dokuments ist Vorgaben zur Nutzung der querschnittlichen Bibliothek <code>isy-task</code> zu geben.
Das Dokument richtet sich somit vorrangig an Entwickler, Konstrukteure und technische Chefarchitekten von Anwendungssystemen, die gemäß den Vorgaben der <a href="../../../../glossary/latest/glossary/master.html#glossar-isyfact" class="xref page">IsyFact</a> umgesetzt werden.</p>
</div>
<div class="paragraph">
<p>Kapitel <a href="#verwendung-der-querschnittsbibliothek-isy-task">Verwendung der Querschnittsbibliothek isy-task</a> beschreibt das Arbeiten mit der Querschnittsbibliothek <code>isy-task</code>.</p>
</div>
<div class="paragraph">
<p>Kapitel <a href="#programmatisches-anlegen-von-aufgaben">Programmatisches Anlegen von Aufgaben</a> beschreibt, wie die Querschnittsbibliothek ohne Spring Konfiguration verwendet werden kann.</p>
</div>
<div class="paragraph">
<p>Kapitel <a href="#einleitung">Konfigurationsschlüssel</a> bietet einen Überblick über die Konfigurationsschlüssel.</p>
</div>
<div class="paragraph">
<p>Kapitel <a href="#einleitung">Überwachung mit jmx</a> zeigt, wie die JMX-Überwachung eingebunden wird.</p>
</div>
<div class="paragraph">
<p>Kapitel <a href="#einleitung">Hinweise für den Task im Parallelbetrieb</a> gibt Anmerkungen für die Implementierung eines Tasks.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="verwendung-der-querschnittsbibliothek-isy-task"><a class="anchor" href="#verwendung-der-querschnittsbibliothek-isy-task"></a>3. Verwendung der Querschnittsbibliothek <code>isy-task</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In diesem Abschnitt werden Inhalt und Einsatz der Querschnittsbibliothek <code>isy-task</code> beschrieben.</p>
</div>
<div class="sect2">
<h3 id="maven"><a class="anchor" href="#maven"></a>3.1. Maven</h3>
<div class="paragraph">
<p>Um die Querschnittsbibliothek einzubinden, fügen Sie die <code>isy-task</code> Abhängigkeit in Ihre pom.xml hinzu.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;de.bund.bva.isyfact&lt;/groupId&gt;
    &lt;artifactId&gt;isy-task&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-konfiguration"><a class="anchor" href="#spring-konfiguration"></a>3.2. Spring Konfiguration</h3>
<div class="paragraph">
<p>Als Nächstes wird der <code>TaskScheduler</code> über Spring eingebunden.</p>
</div>
<div class="paragraph">
<p>Die Bibliothek authentifiziert Benutzer bei entsprechender Konfiguration und bindet sie in den Aufrufkontext der Aufgabe ein.
Sie sichert die Aufgaben selbst allerdings nicht gegen unerlaubte Ausführungen ab.
Die Verantwortlichkeit dafür liegt bei den jeweiligen Fachkomponenten der Anwendungen, die sich gemäß den Sicherheitsrichtlinien der IsyFact und den Anforderungen an die Anwendung schützen müssen.
Authentifizierung und Autorisierung finden nach den Vorgaben des Berechtigungskonzepts statt.
Dazu wird die IsyFact-Bibliothek <code>isy-sicherheit</code> eingesetzt.
Die Nutzung der Bibliothek wird im Dokument <a href="../../isy-sicherheit/nutzungsvorgaben/master.html#einleitung" class="xref page">Nutzungsvorgaben Sicherheit</a> beschrieben.</p>
</div>
<div class="paragraph">
<p>Um die Verwendung von <code>isy-sicherheit</code> für die Authentifizierung und Autorisierung zu konfigurieren, wird die Property <code>isy.task.authentication.enabled</code> in <code>application.properties</code> auf <code>true</code> oder <code>false</code> gesetzt.</p>
</div>
</div>
<div class="sect2">
<h3 id="erstellung-eines-tasks"><a class="anchor" href="#erstellung-eines-tasks"></a>3.3. Erstellung eines Tasks</h3>
<div class="paragraph">
<p>Technisch gesehen ist ein Task eine Java-Klasse, die vom Interface <code>de.bund.bva.isyfact.task.model.Task</code> abgeleitet ist.</p>
</div>
<div class="paragraph">
<p>Ein Task kapselt die Tätigkeiten, die über <code>isy-task</code> zeitgesteuert ausgeführt werden sollen.
Das Interface Task enthält hierfür die abstrakte Methode <code>execute()</code>.
Im folgenden Listing sehen Sie die Methoden des Interfaces Task.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package de.bund.bva.isyfact.task.model;

public interface Task {
void execute();
    boolean isDeaktiviert();
    void aktivieren();
    void deaktivieren();
    void zeichneErfolgreicheAusfuehrungAuf();
    void zeichneFehlgeschlageneAusfuehrungAuf(Exception e);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Das direkte Ableiten vom Interface Task ist nicht empfohlen.
Die Bibliothek bietet hierfür die abstrakte Klasse <code>AbstractTask</code> an.
<code>AbstraktTask</code> ist eine abstrakte Basis-Klasse, die (bis auf die Methode <code>execute()</code>) bereits die folgende Standardimplementierung für jede abstrakte Task-Methode mitbringt:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>sie aktiviert bzw. deaktiviert</strong></p>
<div class="ulist">
<ul>
<li>
<p>Über die Methoden <code>aktivieren()</code> und <code>deaktivieren()</code> kann der Task manuell aktiviert bzw. deaktiviert werden.</p>
</li>
<li>
<p>Ferner lässt sich der Status, ob der Task deaktiviert worden ist, über die Methode <code>isDeaktiviert()</code> abfragen.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>sie zeichnet Erfolg bzw. Misserfolg auf</strong></p>
<div class="ulist">
<ul>
<li>
<p>Wenn ein Task erfolgreich ausgeführt werden konnte, wird dies bei dem <code>TaskMonitor</code> mit dem genauen Zeitpunkt vermerkt.
Hierfür wird die Methode <code>zeichneErfolgreicheAusfuehrungAuf()</code> des Monitors ausgeführt.</p>
</li>
<li>
<p>Beim Misserfolg führt der Runner die Methode <code>zeichneFehlgeschlageneAusfuehrungAuf(Exception)</code> aus.
Hierbei übergibt er ihm die geworfene Ausnahme.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Im <code>AbstractTask</code> ist also bereits die wesentliche Funktionalität für die Ausführung und Überwachung des Tasks implementiert worden.</p>
</div>
<div class="paragraph">
<p>Das folgende Listing zeigt eine Fachkomponente, die zeitgesteuert "Hallo Welt" auf der Konsole ausgibt.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class HalloWeltTask extends AbstractTask {
    @Override
    public void execute() {
        System.out.println("Hallo Welt");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Der Task muss als Nächstes über Properties in <code>application.properties</code> konfiguriert.
Im folgenden Listing sehen Sie die Konfiguration für den <code>HalloWeltTask</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">isy.task.tasks.halloWeltTask.benutzer=TestUser1
isy.task.tasks.halloWeltTask.passwort=TestPasswort1
isy.task.tasks.halloWeltTask.bhkz=BHKZ1
isy.task.tasks.halloWeltTask.ausfuehrung=ONCE
isy.task.tasks.halloWeltTask.initial-delay=10s
isy.task.tasks.halloWeltTask.host=ComputerName
isy.logging.anwendung.typ=GA
isy.logging.anwendung.name=Beispiel
isy.logging.anwendung.version=0.0.1</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ComputerName</code> ist der Name der Maschine, auf der der Task läuft.</p>
</div>
<div class="paragraph">
<p>Ein Task wird grundsätzlich als Spring Bean konfiguriert.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public HalloWeltTask halloWeltTask() {
    return new HalloWeltTask();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Damit die konfigurierten Tasks automatisch beim Start der Anwendung ausgeführt werden, bzw. der <code>TaskScheduler</code> gestartet wird, kann in <code>application.properties</code> der Autostart aktiviert werden:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">isy.task.autostart=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dadurch wird der <code>TaskScheduler</code> beim Anwendungsstart gestartet.
Dieser führt alle konfigurierten Tasks, deren konfigurierter Ausführungszeitpunkt überschritten ist, direkt aus.
In der Zukunft liegende oder wiederholende Tasks werden auch dem Scheduler bekannt gemacht, sodass dieser sie zum entsprechenden Zeitpunkt ausführt.
Zudem wird mit der Einstellung der <code>TaskScheduler</code> beim Beenden der Anwendung automatisch heruntergefahren.</p>
</div>
<div class="paragraph">
<p>Wird kein Autostart konfiguriert, kann alternativ der <code>TaskScheduler</code> über die Methode <code>starteKonfigurierteTasks()</code> manuell gestartet werden.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">taskScheduler.starteKonfigurierteTasks();</code></pre>
</div>
</div>
<div class="paragraph">
<p>In diesem Fall muss der <code>TaskManager</code> auch manuell gestoppt werden, wenn die Geschäftsanwendung herunterfährt.
Hierfür wird die Methode <code>shutdownMitTimeout()</code> aufgerufen, um die Tasks ordentlich zu beenden.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">taskScheduler.shutdownMitTimeout(10);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="verwendung-bereitgestellter-tasks"><a class="anchor" href="#verwendung-bereitgestellter-tasks"></a>3.4. Verwendung der bereitgestellten Tasks</h3>
<div class="paragraph">
<p>Die Bibliothek <code>isy-task</code> enthält nützliche Tasks für die <a href="../../../../glossary/latest/glossary/master.html#glossar-ifs" class="xref page">Bibliothek (IsyFact Standards)</a>.</p>
</div>
<div class="sect3">
<h4 id="_automatische_aktualisierung_der_konfiguration"><a class="anchor" href="#_automatische_aktualisierung_der_konfiguration"></a>3.4.1. Automatische Aktualisierung der Konfiguration</h4>
<div class="paragraph">
<p>Dieser Task dient der periodischen Prüfung der Konfigurationsdateien auf Änderungen sowie der automatischen Aktualisierung der Konfiguration bei Änderungen.
Anwendungen können den Task einsetzen, in dem sie ihn als Spring Bean konfigurieren:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
public class UpdateKonfigurationTaskConfiguration {

    @Bean
    public KonfigurationUpdateTask(@Qualifier("konfigurationUpdateTaskMonitor") TaskMonitor monitor, Konfiguration konfiguration) {
        return new KonfigurationUpdateTask(konfiguration, monitor);
    }

    @Bean
    public TaskMonitor konfigurationUpdateTaskMonitor() {
        return new TaskMonitor();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Der Task <code>KonfigurationUpdateTask</code> erwartet task-spezifische Konfigurationsparameter, wie sie im Kapitel <a href="#aufgabenspezifische-konfiguration">Aufgabenspezifische Konfiguration</a> beschrieben werden:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.tasks.konfigurationUpdateTask.ausfuehrung=FIXED_DELAY
isy.task.tasks.konfigurationUpdateTask.initial-delay=5s
isy.task.tasks.konfigurationUpdateTask.fixed-delay=60s</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="programmatisches-anlegen-von-aufgaben"><a class="anchor" href="#programmatisches-anlegen-von-aufgaben"></a>4. Programmatisches Anlegen von Aufgaben</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Eine weitere Möglichkeit, wie <code>isy-task</code> auf einfacher Weise verwendet werden kann, bietet die Möglichkeit des programmatischen Anlegens von Aufgaben.
Hierbei wird die Aufgabe nicht über eine Konfigurationsdatei geplant, sondern programmatisch.</p>
</div>
<div class="paragraph">
<p>Für die programmatische Variante erstellen Sie eine <code>TaskKonfiguration</code>.
Der <code>TaskKonfiguration</code> werden die Properties mithilfe von Setter-Methoden übergeben.
Für die Properties in der TaskKonfiguration gelten dieselben Regeln wie für die Schlüssel in der Konfigurationsdatei.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">TaskKonfiguration taskKonfiguration =
    new TaskKonfiguration();
taskKonfiguration.setTaskId("halloWeltTask");
taskKonfiguration.setAuthenticator(new NoOpAuthenticator());
taskKonfiguration.setHostname("localhost");
taskKonfiguration.setAusfuehrungsplan(
TaskKonfiguration.Ausfuehrungsplan.ONCE);
taskKonfiguration.setInitialDelay(Duration.ofSeconds(1));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Die Querschnittsbibliothek <code>isy-task</code> sieht vor, dass jeder Task von einem <code>de.bund.bva.isyfact.task.model.TaskRunner</code> gesteuert wird.
Ein <code>TaskRunner</code> übernimmt nicht nur die eigentliche Ausführung des Tasks, sondern enthält darüber hinaus auch die zur Ausführung benötigte Konfiguration.
Um den Task auszuführen, wird er dem <code>TaskRunner</code> gemeinsam mit der <code>TaskKonfiguration</code> übergeben.</p>
</div>
<div class="paragraph">
<p>Der <code>TaskRunner</code> wird dem <code>TaskScheduler</code> mithilfe der Methode <code>addTask()</code> übergeben.
Während für den Start im oberen Abschnitt (mit der Spring-Konfiguration) beim <code>TaskScheduler</code> die Methode <code>starteKonfigurierteTasks()</code> ausgeführt wurde, ruft man bei dem manuellen Verfahren die Methode <code>start()</code> auf.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">TaskRunner taskRunner = new TaskRunnerImpl(manuellerTask,taskKonfiguration);
taskScheduler.addTask(taskRunner);
taskScheduler.start();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="konfigurationsschluessel"><a class="anchor" href="#konfigurationsschluessel"></a>5. Konfigurationsschlüssel</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Die folgenden Konfigurationsschlüssel werden von <code>isy-task</code> eingelesen und verwertet.</p>
</div>
<div class="sect2">
<h3 id="allgemeine-konfiguration"><a class="anchor" href="#allgemeine-konfiguration"></a>5.1. Allgemeine Konfiguration</h3>
<div class="paragraph">
<p>Ob der TaskScheduler automatisch beim Anwendungsstart gestartet werden soll.
(Standardwert <code>false</code>; setze auf <code>true</code> für Autostart)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">isy.task.autostart</code></pre>
</div>
</div>
<div class="paragraph">
<p>Die Anzahl der Threads, die im Thread-Pool initial angelegt werden:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.default.amount_of_threads</code></pre>
</div>
</div>
<div class="paragraph">
<p>Das DateTimePattern, das für den Start eines Tasks verwendet werden kann:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.default.date_time_pattern</code></pre>
</div>
</div>
<div class="paragraph">
<p>Die Dauer, die <code>isy-task</code> wartet, bis ein fehlgeschlagener Task erneut gestartet wird:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.watchdog.restart_interval</code></pre>
</div>
</div>
<div class="paragraph">
<p>Die Kennung die benutzt wird, wenn kein Task-spezifisches Kennwort konfiguriert wird:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.default.benutzer</code></pre>
</div>
</div>
<div class="paragraph">
<p>Das Passwort das benutzt wird, wenn kein Task-spezifisches Passwort konfiguriert wird:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.default.passwort</code></pre>
</div>
</div>
<div class="paragraph">
<p>Das Behördenkennzeichen, das benutzt wird, wenn kein Task-spezifisches konfiguriert wird:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.default.bhkz</code></pre>
</div>
</div>
<div class="paragraph">
<p>Der Host, wenn kein Task-spezifischer Host konfiguriert wird:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.default.host</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="aufgabenspezifische-konfiguration"><a class="anchor" href="#aufgabenspezifische-konfiguration"></a>5.2. Aufgabenspezifische Konfiguration</h3>
<div class="paragraph">
<p>Die Kennung des ausführenden Benutzers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.tasks.&lt;Task&gt;.benutzer</code></pre>
</div>
</div>
<div class="paragraph">
<p>Das Passwort des ausführenden Benutzers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.tasks.&lt;Task&gt;.passwort</code></pre>
</div>
</div>
<div class="paragraph">
<p>Behördenkennzeichen des ausführenden Benutzers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.tasks.&lt;Task&gt;.bhkz</code></pre>
</div>
</div>
<div class="paragraph">
<p>Der Name des Hosts auf dem der Task ausgeführt werden soll.
Der Name kann als Regulärer Ausdruck angegeben werden, es wird dann geprüft, ob der tatsächliche Hostname dem Regulären Ausdruck entspricht.
Dadurch kann auch eine Liste von Hostnamen angegeben werden, z.B. "host1|host2|host3":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.tasks.&lt;Task&gt;.host</code></pre>
</div>
</div>
<div class="paragraph">
<p>Der Ausführungsplan für einen Task:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.tasks.&lt;Task&gt;.ausfuehrung</code></pre>
</div>
</div>
<div class="paragraph">
<p>Der einmalige Zeitpunkt der Ausführung in Form eines Zeitstempels:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.tasks.&lt;Task&gt;.zeitpunkt</code></pre>
</div>
</div>
<div class="paragraph">
<p>Die Dauer, die zwischen dem Start des TaskSchedulers und der einmaligen Ausführung liegt.
Die Dauer muss die Form eines Zeitraums gemäß dem <a href="../../isy-datetime/konzept/master.html#einleitung" class="xref page">Konzept Datum/Zeit</a> besitzen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.tasks.&lt;Task&gt;.initial-delay</code></pre>
</div>
</div>
<div class="paragraph">
<p>Die festgelegte Dauer zwischen zwei Starts einer Ausführung.
Die Dauer muss die Form eines Zeitraums gemäß dem  <a href="../../isy-datetime/konzept/master.html#einleitung" class="xref page">Konzept Datum/Zeit</a> besitzen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.tasks.&lt;Task&gt;.fixed-rate</code></pre>
</div>
</div>
<div class="paragraph">
<p>Die festgelegte Dauer zwischen dem Ende einer und dem Start der nächsten Ausführung.
Die Dauer muss die Form eines Zeitraums gemäß dem  <a href="../../isy-datetime/konzept/master.html#einleitung" class="xref page">Konzept Datum/Zeit</a> besitzen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">isy.task.tasks.&lt;Task&gt;.fixed-delay</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ueberwachung-mit-jmx"><a class="anchor" href="#ueberwachung-mit-jmx"></a>6. Überwachung mit JMX</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Die Querschnittsbibliothek <code>isy-task</code> sieht eine Überwachung über JMX vor.</p>
</div>
<div class="paragraph">
<p>Der Überwachungsmechanismus von <code>isy-task</code>, der über JMX abgefragt werden kann, benötigt den TaskMonitor, um sich beispielsweise Erfolg oder Misserfolg des Tasks zu merken.
Wenn der Task vom AbstractTask abgeleitet ist, kann man dem Task einen TaskMonitor per Konstruktor übergeben.</p>
</div>
<div class="paragraph">
<p>Soll der JMX-Monitor verwendet werden, so muss dieser genau wie der Task als Spring Bean konfiguriert werden.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
public class TaskConfiguration {

    @Bean
    public TestTask testTask(TaskMonitor monitor) {
        return new TestTask(monitor);
    }

    @Bean
    public TaskMonitor taskMonitor() {
        return new TaskMonitor();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Der MBean-Exporter wird gemäß dem <a href="../../isy-ueberwachung/konzept/master.html#einleitung" class="xref page">Konzept Überwachung</a> konfiguriert.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hinweise-fuer-den-task-im-parallelbetrieb"><a class="anchor" href="#hinweise-fuer-den-task-im-parallelbetrieb"></a>7. Hinweise für den Task im Parallelbetrieb</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bei der Implementierung eines Tasks muss beachtet werden, dass ihn die Querschnittsbibliothek im Parallelbetrieb betreiben wird.
Werden hierbei die Besonderheiten der Java Multithreading API nicht berücksichtigt, kann dies zu einem fehlerhaften Verhalten in der <a href="../../../../glossary/latest/glossary/master.html#glossar-geschaeftsanwendung" class="xref page">Geschäftsanwendung</a> führen.</p>
</div>
<div class="sect2">
<h3 id="threadsicherheit"><a class="anchor" href="#threadsicherheit"></a>7.1. Threadsicherheit</h3>
<div class="paragraph">
<p>Ein wichtiger Aspekt des Parallelbetriebs ist die Threadsicherheit.
In diesem Abschnitt werden die Probleme bezüglich der Threadsicherheit verdeutlicht.
Grundsätzlich ist es so, dass Rechner mit mehreren Rechnerkernen, den Parallelbetrieb auf Hardwareebene verwirklichen und somit den Gesamtprozess beschleunigen.
Die Anzahl der Rechnerkerne braucht programmatisch aber nicht berücksichtigt werden, weil die Java Laufzeitumgebung auch die Rechenzeit eines einzelnen Rechnerkerns in feingranulare Zeitscheiben schneidet.
Hierdurch kann die Rechenzeit einer blockierenden Aufgabe für die Erledigung anderer Aufgaben genutzt werden.
Allerdings bietet dies auch ein hohes Potenzial für ein fehlerhaftes Verhalten.
Denn die Zuordnung der Zeitscheiben erfolgt bei jeder erneuten Ausführung der Geschäftsanwendung unterschiedlich.
Daher kann ein erfolgreicher JUnit-Test eine fehlerfreie Ausführung in der Produktionsumgebung nicht gewährleisten.
Selbst die Aufteilung auf unterschiedliche Rechnerkerne verhindert von sich aus kein fehlerhaftes Verhalten.
Aus diesem Grund müssen Methoden, die nicht von mehreren Threads gleichzeitig durchlaufen werden sollen, über einen Lock-Mechanismus (beispielsweise über das Schlüsselwort synchronized) davor geschützt werden.
Ein weiteres Problem gemeinsamer Instanzen, betrifft die Objektvariablen.
Auch der Zugriff auf eine veränderbare Objektvariable (d.h. eine Objektvariable, die nicht mit final versehen wurde) eines gemeinsamen Objekts kann nicht konsistent erfolgen, weil jeder Rechnerkern über einen eigenen Cache verfügt, der sich bei Änderung des Wertes naturgemäß vom Wert im Cache des anderen Rechnerkerns unterscheidet.
Hilfreich ist hierbei das Schlüsselwort <em>volatile</em>, das dafür sorgt, dass vor jedem Zugriff eine Synchronisation zwischen dem Thread-spezifischen Cache und dem Hauptspeicher stattfindet.
Die Objektvariable die mit volatile versehen wurde, ist also scheinbar atomar.
Allerdings trifft das nicht für den schreibenden Zugriff zu, da jegliche Veränderung in mehreren Schritten erledigt wird.
Um sicherzustellen, dass der Zugriff auf eine gemeinsame Objektvariable konsistent ist, wird beispielsweise der Wertebehälter einer Ganzzahl mit dem speziellen Wertetypen AtomicInteger definiert.
In der Regel wird es sich bei der Objektvariablen aber eher um einen Referenztypen handeln.
In diesen Fällen sollten die Objektvariablen in einem ThreadLocal-Objekt deklariert werden.</p>
</div>
</div>
<div class="sect2">
<h3 id="status-des-threads-abfragen"><a class="anchor" href="#status-des-threads-abfragen"></a>7.2. Status des Threads abfragen</h3>
<div class="paragraph">
<p>Genau wie bei allen Multithreading Anwendungen, so kann es auch bei der Querschnittsbibliothek <code>isy-task</code> nützlich sein, dass ein Thread einen Thread-State hat, der über die Methode <code>Thread.currentThread().getState()</code> abgefragt werden kann.
Sobald die Querschnittsbibliothek <code>isy-task</code> den Thread zum Laufen bringt, wechselt der <code>Thread.State</code> von <code>NEW</code> auf <code>RUNNABLE</code>.
Dies ist genau genommen der Zeitpunkt, wenn die JVM die Methode <code>run()</code> ausführt.
Wenn die Methode <code>run()</code> durchlaufen worden ist oder der Auswurf einer <code>CheckedException</code> nicht abgefangen wurde, wechselt der <code>Thread-State</code> auf <code>TERMINATED</code>.
Dieser Wechsel lässt sich auch durch die spezielle Methode <code>isAlive()</code> der Klasse <code>Thread</code> abfragen, die beim <code>Thread.State</code> <code>RUNNABLE</code> <code>true</code> liefert und ansonsten <code>false</code>.
Grundsätzlich kann der <code>Thread-State</code> folgende Werte einnehmen:</p>
</div>
<table id="table-StateVals" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Thread-State</th>
<th class="tableblock halign-left valign-top">Bedeutung</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NEW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wird noch nicht ausgeführt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RUNNABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wird ausgeführt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BLOCKED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wartet auf einen Monitor Lock</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WAITING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wartet auf einen anderen Thread</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TIMED_WAITING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wartet für eine bestimmte Dauer auf den anderen Thread</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TERMINATED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ausführung ist beendet</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ausfuehrung-eines-tasks-vorzeitig-beenden"><a class="anchor" href="#ausfuehrung-eines-tasks-vorzeitig-beenden"></a>7.3. Ausführung eines Tasks vorzeitig beenden</h3>
<div class="paragraph">
<p>Bei einem Thread ist ein Abbruch-Mechanismus eingebaut.
Der Mechanismus nutzt einen internen Flag, der sich interrupt status nennt und der mit einem Abbruchwunsch durch die Klassenmethode <code>Thread.interrupt()</code> auf den Status <code>interrupted</code> gesetzt werden kann.
Es ist Sache des Entwicklers der IsyFact Fachkomponente, wie er auf den Abbruchwunsch reagiert.
Beispielsweise könnte es passieren, dass der Abbruchwunsch während eines Pausierens durch die Methode <code>sleep()</code> auftritt.
In diesem Fall, wird das dazu führen, dass eine <code>InterruptedException</code> geworfen wird.
Deshalb muss dort entsprechend, also beispielsweise mit einer <code>return</code>-Anweisung reagiert werden.
In der Praxis ist es aber noch wahrscheinlicher, dass nicht während einer <code>sleep()</code> Methode, sondern beim Zugriff auf eine Netzwerkressource oder bei einer anderen langwierigen Tätigkeit ein Abbruchswunsch erfolgt.
In solch einem Fall, muss der Entwickler den Interrupt Status selber abfragen.
Hierfür bietet die Klasse <code>Thread</code> eine Methode an, die sich <code>interrupted()</code> nennt.
Zu beachten ist, dass die Methode <code>interrupted()</code> den Statusflag immer zurückgesetzt.
Was man auch beachten sollte ist, dass die <code>sleep()</code> Methode ebenso dafür sorgt, dass der Status <code>interrupted</code> wieder zurückgesetzt wird.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<div class="divFooter"></div>

<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/isyfact.js"></script>
  </body>
</html>
